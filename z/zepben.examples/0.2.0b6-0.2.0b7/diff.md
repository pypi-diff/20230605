# Comparing `tmp/zepben.examples-0.2.0b6-py3-none-any.whl.zip` & `tmp/zepben.examples-0.2.0b7-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,19 +1,19 @@
-Zip file size: 27882 bytes, number of entries: 17
--rw-r--r--  2.0 unx      245 b- defN 23-Jun-02 05:24 zepben/examples/__init__.py
--rw-r--r--  2.0 unx     3512 b- defN 23-Jun-02 05:24 zepben/examples/connecting_to_grpc_service.py
--rw-r--r--  2.0 unx     4136 b- defN 23-Jun-02 05:24 zepben/examples/examining_connectivity.py
--rw-r--r--  2.0 unx     3924 b- defN 23-Jun-02 05:24 zepben/examples/fetching_network_model.py
--rw-r--r--  2.0 unx    14214 b- defN 23-Jun-02 05:24 zepben/examples/ieee_13_node_test_feeder.py
--rw-r--r--  2.0 unx     2070 b- defN 23-Jun-02 05:24 zepben/examples/network_hierarchy.py
--rw-r--r--  2.0 unx     7440 b- defN 23-Jun-02 05:24 zepben/examples/network_service_interactions.py
--rw-r--r--  2.0 unx     8220 b- defN 23-Jun-02 05:24 zepben/examples/request_power_factory_models.py
--rw-r--r--  2.0 unx    18157 b- defN 23-Jun-02 05:24 zepben/examples/tracing.py
--rw-r--r--  2.0 unx     2410 b- defN 23-Jun-02 05:24 zepben/examples/translating_to_pandapower_model.py
--rw-r--r--  2.0 unx      245 b- defN 23-Jun-02 05:24 zepben/examples/studies/__init__.py
--rw-r--r--  2.0 unx     4331 b- defN 23-Jun-02 05:24 zepben/examples/studies/creating_and_uploading_study.py
--rw-r--r--  2.0 unx    16725 b- defN 23-Jun-02 05:25 zepben.examples-0.2.0b6.dist-info/LICENSE
--rw-r--r--  2.0 unx     1063 b- defN 23-Jun-02 05:25 zepben.examples-0.2.0b6.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-02 05:25 zepben.examples-0.2.0b6.dist-info/WHEEL
--rw-r--r--  2.0 unx        7 b- defN 23-Jun-02 05:25 zepben.examples-0.2.0b6.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1613 b- defN 23-Jun-02 05:25 zepben.examples-0.2.0b6.dist-info/RECORD
-17 files, 88404 bytes uncompressed, 25164 bytes compressed:  71.5%
+Zip file size: 28319 bytes, number of entries: 17
+-rw-r--r--  2.0 unx      245 b- defN 23-Jun-05 01:43 zepben/examples/__init__.py
+-rw-r--r--  2.0 unx     3512 b- defN 23-Jun-05 01:43 zepben/examples/connecting_to_grpc_service.py
+-rw-r--r--  2.0 unx     4136 b- defN 23-Jun-05 01:43 zepben/examples/examining_connectivity.py
+-rw-r--r--  2.0 unx     3924 b- defN 23-Jun-05 01:43 zepben/examples/fetching_network_model.py
+-rw-r--r--  2.0 unx    14214 b- defN 23-Jun-05 01:43 zepben/examples/ieee_13_node_test_feeder.py
+-rw-r--r--  2.0 unx     2070 b- defN 23-Jun-05 01:43 zepben/examples/network_hierarchy.py
+-rw-r--r--  2.0 unx     7440 b- defN 23-Jun-05 01:43 zepben/examples/network_service_interactions.py
+-rw-r--r--  2.0 unx    10031 b- defN 23-Jun-05 01:43 zepben/examples/request_power_factory_models.py
+-rw-r--r--  2.0 unx    18157 b- defN 23-Jun-05 01:43 zepben/examples/tracing.py
+-rw-r--r--  2.0 unx     2410 b- defN 23-Jun-05 01:43 zepben/examples/translating_to_pandapower_model.py
+-rw-r--r--  2.0 unx      245 b- defN 23-Jun-05 01:43 zepben/examples/studies/__init__.py
+-rw-r--r--  2.0 unx     4331 b- defN 23-Jun-05 01:43 zepben/examples/studies/creating_and_uploading_study.py
+-rw-r--r--  2.0 unx    16725 b- defN 23-Jun-05 01:44 zepben.examples-0.2.0b7.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1063 b- defN 23-Jun-05 01:44 zepben.examples-0.2.0b7.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-05 01:44 zepben.examples-0.2.0b7.dist-info/WHEEL
+-rw-r--r--  2.0 unx        7 b- defN 23-Jun-05 01:44 zepben.examples-0.2.0b7.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1614 b- defN 23-Jun-05 01:44 zepben.examples-0.2.0b7.dist-info/RECORD
+17 files, 90216 bytes uncompressed, 25601 bytes compressed:  71.6%
```

## zipnote {}

```diff
@@ -30,23 +30,23 @@
 
 Filename: zepben/examples/studies/__init__.py
 Comment: 
 
 Filename: zepben/examples/studies/creating_and_uploading_study.py
 Comment: 
 
-Filename: zepben.examples-0.2.0b6.dist-info/LICENSE
+Filename: zepben.examples-0.2.0b7.dist-info/LICENSE
 Comment: 
 
-Filename: zepben.examples-0.2.0b6.dist-info/METADATA
+Filename: zepben.examples-0.2.0b7.dist-info/METADATA
 Comment: 
 
-Filename: zepben.examples-0.2.0b6.dist-info/WHEEL
+Filename: zepben.examples-0.2.0b7.dist-info/WHEEL
 Comment: 
 
-Filename: zepben.examples-0.2.0b6.dist-info/top_level.txt
+Filename: zepben.examples-0.2.0b7.dist-info/top_level.txt
 Comment: 
 
-Filename: zepben.examples-0.2.0b6.dist-info/RECORD
+Filename: zepben.examples-0.2.0b7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## zepben/examples/request_power_factory_models.py

```diff
@@ -1,16 +1,18 @@
 #  Copyright 2023 Zeppelin Bend Pty Ltd
 #
 #  This Source Code Form is subject to the terms of the Mozilla Public
 #  License, v. 2.0. If a copy of the MPL was not distributed with this
 #  file, You can obtain one at https://mozilla.org/MPL/2.0/.
 
 import json
+import os
 from typing import List
 
+import requests
 from graphqlclient import GraphQLClient
 from zepben.auth import get_token_fetcher
 
 # This example utilises the EWB GraphQL APIs to fetch the network hierarchy from the server and
 # then create a Powerfactory model by selecting components of the hierarchy to use.
 # To use, populate the below variables with your desired targets plus the server and auth settings.
 
@@ -18,14 +20,15 @@
 # Names are visible through the hierarchy viewer in the UI - or you can do a getNetworkHierarchy GraphQL query as per the below.
 target_zone_substation = {"zonesub-mRID-or-name"}
 target_feeder = {"feeder-mRID-or-name"}
 target_lv = {"lvfeeder-mRID-or-name"}
 
 # resulting PFD file name
 file_name = "test_file"
+output_dir = "path to output dir"
 
 # graphQL endpoint access settings
 network_endpoint = 'https://{url}/api/network/graphql'
 api_endpoint = 'https://{url}/api/graphql'
 audience = "https://{url}/"
 issuer_domain = "issuer_domain"
 client_id = 'client_id'
@@ -87,15 +90,16 @@
           }
         }
             '''
 
     if check_if_currently_generating_a_model(tft):
         result = retrieve_network_hierarchy(body, tft)
         target = get_target(target, result)
-        request_pf_model(target, file_name, tft)
+        model_id = request_pf_model(target, file_name, tft)
+        print("Power factory model creation requested, model id: " + model_id)
     else:
         print("Warning: Still generating previous model, current model will not be generated.")
 
 
 def request_pf_model_for_a_zone_with_hv_only():
     # Set up auth
     token_fetcher = get_token_fetcher(audience=audience, issuer_domain=issuer_domain, client_id=client_id, username=username, password=password)
@@ -115,15 +119,16 @@
             }
           }
         }
             '''
     if check_if_currently_generating_a_model(tft):
         result = retrieve_network_hierarchy(body, tft)
         target = get_target(target, result)
-        request_pf_model(target, file_name, tft)
+        model_id = request_pf_model(target, file_name, tft)
+        print("Power factory model creation requested, model id: " + model_id)
     else:
         print("Warning: Still generating previous model, current model will not be generated.")
 
 
 def retrieve_network_hierarchy(body, tft):
     client = GraphQLClient(network_endpoint)
     client.inject_token(tft)
@@ -195,15 +200,16 @@
         'generationSpec': {'equipmentContainerMrids': equipment_container_list,
                            'distributionTransformerConfig': {
                                'rGround': 0.01,
                                'xGround': 0.01
                            }
                            },
         'isPublic': 'true'}}
-    client.execute(body, variables)
+    result = client.execute(body, variables)
+    return json.loads(result)['data']['createNetModel']
 
 
 def check_if_currently_generating_a_model(tft):
     body = '''
     query pagedNetModels(
       $limit: Int!
       $offset: Long!
@@ -239,13 +245,59 @@
     entries = json.loads(result)
     for entry in entries['data']['pagedNetModels']['netModels']:
         if entry['state'] == 'CREATION':
             return False
     return True
 
 
+def download_model(model_number):
+    # Set up auth
+    token_fetcher = get_token_fetcher(audience=audience, issuer_domain=issuer_domain, client_id=client_id, username=username, password=password)
+    tft = token_fetcher.fetch_token()
+
+    # Request model
+    model_url = api_endpoint.replace("graphql", "net-model/") + str(model_number)
+    body = '''
+    query netModelById($modelId: ID!) {
+      netModelById(modelId: $modelId) {
+        id
+        name
+        createdAt
+        state
+        generationSpec {
+          equipmentContainerMrids
+          distributionTransformerConfig {
+            rGround
+            xGround
+          }
+        }
+        isPublic
+        errors
+      }
+    }
+    '''
+    variables = {
+        "modelId": model_number,
+    }
+    client = GraphQLClient(api_endpoint)
+    client.inject_token(tft)
+    result = json.loads(client.execute(body, variables))
+    model_status = result['data']['netModelById']['state']
+    if model_status == "COMPLETED":
+        model = requests.get(model_url, headers={'Authorization': tft})
+        open(os.path.join(output_dir, file_name) + ".pfd", 'wb').write(model.content)
+        print(file_name + ".pfd saved at " + output_dir)
+    elif model_status == "CREATION":
+        print("Model is still being created, please download at a later time")
+    elif model_status == "FAILED":
+        print("Model creation error: " + str(result['data']['netModelById']['errors']))
+
+
 if __name__ == "__main__":
     # Generate model with lv
     request_pf_model_for_a_zone_with_hv_lv()
 
     # Generate model without lv
     request_pf_model_for_a_zone_with_hv_only()
+
+    # Download a model via model number
+    download_model(123)
```

## Comparing `zepben.examples-0.2.0b6.dist-info/LICENSE` & `zepben.examples-0.2.0b7.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `zepben.examples-0.2.0b6.dist-info/METADATA` & `zepben.examples-0.2.0b7.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: zepben.examples
-Version: 0.2.0b6
+Version: 0.2.0b7
 Summary: Module containing examples for interacting with Zepben's platform
 Home-page: https://github.com/zepben/ewb-sdk-examples-python
 Author: Zeppelin Bend
 Author-email: oss@zepben.com
 License: MPL 2.0
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.7
```

## Comparing `zepben.examples-0.2.0b6.dist-info/RECORD` & `zepben.examples-0.2.0b7.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 zepben/examples/__init__.py,sha256=nFdcikJb3FegBko35m1xxmjMmC3cZCaqr8ohypQJQIQ,245
 zepben/examples/connecting_to_grpc_service.py,sha256=qjAVh2bUBxoEfJyUDjoj3CIjmSo16Lrf2RW4soGjQPE,3512
 zepben/examples/examining_connectivity.py,sha256=ny8SbgmIA03wxQzLJ8VRsLpR7uW2_6a3GFXCHtOyLgg,4136
 zepben/examples/fetching_network_model.py,sha256=ScK_3HLuVFpD8wXigOLT-VYtxNFX_pVTAk_Y5uM5UnI,3924
 zepben/examples/ieee_13_node_test_feeder.py,sha256=4RJAOE6SiHeBYateNxOKB95zaXWewvLXqqbMVd49-8Y,14214
 zepben/examples/network_hierarchy.py,sha256=eguDNnJ8mS4kwv9QvEXUtvqr-VW7TlgGg4tNddsR3Uc,2070
 zepben/examples/network_service_interactions.py,sha256=Yg4wmu4ebHFSlXB99REdbY-v4yB1uwRWO3KwExqGQPU,7440
-zepben/examples/request_power_factory_models.py,sha256=3Ofju6JlqPR88fvQZn6YtPht5T2DOL43Hm-RRY1mmYY,8220
+zepben/examples/request_power_factory_models.py,sha256=NE7aMBX8xB7fJ9Q0syVCNCwwzjOP_7Udp9HBxrTCUDo,10031
 zepben/examples/tracing.py,sha256=zMpoL4mwRGOrc1DuCs6wOt1LSH1yDqoLIldPZ_bYIqI,18157
 zepben/examples/translating_to_pandapower_model.py,sha256=TbbeZ7Xv9MYeiSny3kfs8pnwHfueNe7vknHFQEkO8uc,2410
 zepben/examples/studies/__init__.py,sha256=4_VsSq4lh7u0jpJS8U9AECShaepOAFHC1RmELVT1RtI,245
 zepben/examples/studies/creating_and_uploading_study.py,sha256=dNuYw1RgDjAfCbUvvbkBtf2cdtSIyuDctYdi_1w9Kmw,4331
-zepben.examples-0.2.0b6.dist-info/LICENSE,sha256=aAHD66h6PQIETpkJDvg5yEObyFvXUED8u7S8dlh6K0Y,16725
-zepben.examples-0.2.0b6.dist-info/METADATA,sha256=sClbS3-Z7PlGEXuk5px9e7Lu2EDnZD9Wh5Q5XiyvMUg,1063
-zepben.examples-0.2.0b6.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-zepben.examples-0.2.0b6.dist-info/top_level.txt,sha256=eVLDJiO6FGjL_Z7KdmFE-R8uf1Q07aaVLGe9Ee4kmBw,7
-zepben.examples-0.2.0b6.dist-info/RECORD,,
+zepben.examples-0.2.0b7.dist-info/LICENSE,sha256=aAHD66h6PQIETpkJDvg5yEObyFvXUED8u7S8dlh6K0Y,16725
+zepben.examples-0.2.0b7.dist-info/METADATA,sha256=L3wUiNHx4FWoagIOQoaOSFN05UCsHdeyurafhju2pGA,1063
+zepben.examples-0.2.0b7.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+zepben.examples-0.2.0b7.dist-info/top_level.txt,sha256=eVLDJiO6FGjL_Z7KdmFE-R8uf1Q07aaVLGe9Ee4kmBw,7
+zepben.examples-0.2.0b7.dist-info/RECORD,,
```

