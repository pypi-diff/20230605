# Comparing `tmp/odoo14_addon_connector_importer-14.0.2.2.1-py3-none-any.whl.zip` & `tmp/odoo14_addon_connector_importer-14.0.2.3.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,77 +1,77 @@
-Zip file size: 100164 bytes, number of entries: 75
--rw-r--r--  2.0 unx     4056 b- defN 23-May-12 14:59 odoo/addons/connector_importer/README.rst
--rw-r--r--  2.0 unx       72 b- defN 23-May-12 14:59 odoo/addons/connector_importer/__init__.py
--rw-r--r--  2.0 unx     1033 b- defN 23-May-12 14:59 odoo/addons/connector_importer/__manifest__.py
--rw-r--r--  2.0 unx      985 b- defN 23-May-12 14:59 odoo/addons/connector_importer/events.py
--rw-r--r--  2.0 unx      757 b- defN 23-May-12 14:59 odoo/addons/connector_importer/log.py
--rw-r--r--  2.0 unx     1059 b- defN 23-May-12 14:59 odoo/addons/connector_importer/menuitems.xml
--rw-r--r--  2.0 unx      227 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/__init__.py
--rw-r--r--  2.0 unx      566 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/automapper.py
--rw-r--r--  2.0 unx      332 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/base.py
--rw-r--r--  2.0 unx     6520 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/dynamicmapper.py
--rw-r--r--  2.0 unx    15079 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/importer.py
--rw-r--r--  2.0 unx     6589 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/importer_csv_std.py
--rw-r--r--  2.0 unx     4380 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/mapper.py
--rw-r--r--  2.0 unx     8991 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/odoorecord.py
--rw-r--r--  2.0 unx     1436 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/odoorecord_csv_std.py
--rw-r--r--  2.0 unx     4204 b- defN 23-May-12 14:59 odoo/addons/connector_importer/components/tracker.py
--rw-r--r--  2.0 unx       19 b- defN 23-May-12 14:59 odoo/addons/connector_importer/controllers/__init__.py
--rw-r--r--  2.0 unx      788 b- defN 23-May-12 14:59 odoo/addons/connector_importer/controllers/main.py
--rw-r--r--  2.0 unx      678 b- defN 23-May-12 14:59 odoo/addons/connector_importer/data/ir_cron.xml
--rw-r--r--  2.0 unx      827 b- defN 23-May-12 14:59 odoo/addons/connector_importer/data/queue_job_function_data.xml
--rw-r--r--  2.0 unx    32311 b- defN 23-May-12 14:59 odoo/addons/connector_importer/i18n/connector_importer.pot
--rw-r--r--  2.0 unx      187 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/__init__.py
--rw-r--r--  2.0 unx     5152 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/backend.py
--rw-r--r--  2.0 unx     2499 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/cron_mixin.py
--rw-r--r--  2.0 unx     5696 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/import_type.py
--rw-r--r--  2.0 unx      903 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/job_mixin.py
--rw-r--r--  2.0 unx     4078 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/record.py
--rw-r--r--  2.0 unx    11612 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/recordset.py
--rw-r--r--  2.0 unx     8955 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/reporter.py
--rw-r--r--  2.0 unx       88 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/sources/__init__.py
--rw-r--r--  2.0 unx     2409 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/sources/source_consumer_mixin.py
--rw-r--r--  2.0 unx     4005 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/sources/source_csv.py
--rw-r--r--  2.0 unx     4110 b- defN 23-May-12 14:59 odoo/addons/connector_importer/models/sources/source_mixin.py
--rw-r--r--  2.0 unx      184 b- defN 23-May-12 14:59 odoo/addons/connector_importer/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      118 b- defN 23-May-12 14:59 odoo/addons/connector_importer/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     1027 b- defN 23-May-12 14:59 odoo/addons/connector_importer/readme/ROADMAP.rst
--rw-r--r--  2.0 unx     1402 b- defN 23-May-12 14:59 odoo/addons/connector_importer/security/ir.model.access.csv
--rw-r--r--  2.0 unx      647 b- defN 23-May-12 14:59 odoo/addons/connector_importer/security/security.xml
--rw-r--r--  2.0 unx     8186 b- defN 23-May-12 14:59 odoo/addons/connector_importer/static/description/icon.png
--rw-r--r--  2.0 unx     4486 b- defN 23-May-12 14:59 odoo/addons/connector_importer/static/description/icon.svg
--rw-r--r--  2.0 unx    13479 b- defN 23-May-12 14:59 odoo/addons/connector_importer/static/description/index.html
--rw-r--r--  2.0 unx      344 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/__init__.py
--rw-r--r--  2.0 unx     3171 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/common.py
--rw-r--r--  2.0 unx     1814 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/fake_components.py
--rw-r--r--  2.0 unx     1022 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/fake_models.py
--rw-r--r--  2.0 unx      754 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/record_capturer.py
--rw-r--r--  2.0 unx     1543 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_backend.py
--rw-r--r--  2.0 unx     1505 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_cron.py
--rw-r--r--  2.0 unx     5840 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_import_type.py
--rw-r--r--  2.0 unx     4534 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_mapper.py
--rw-r--r--  2.0 unx     2700 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_record_handler.py
--rw-r--r--  2.0 unx     4451 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_record_importer.py
--rw-r--r--  2.0 unx     4258 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_record_importer_basic.py
--rw-r--r--  2.0 unx     1847 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_record_importer_xmlid.py
--rw-r--r--  2.0 unx     3008 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_recordset.py
--rw-r--r--  2.0 unx     3352 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_recordset_importer.py
--rw-r--r--  2.0 unx     2760 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_source.py
--rw-r--r--  2.0 unx     2990 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/test_source_csv.py
--rw-r--r--  2.0 unx       85 b- defN 23-May-12 14:59 odoo/addons/connector_importer/tests/fixtures/csv_source_test1.csv
--rw-r--r--  2.0 unx        0 b- defN 23-May-12 14:59 odoo/addons/connector_importer/utils/__init__.py
--rw-r--r--  2.0 unx     4114 b- defN 23-May-12 14:59 odoo/addons/connector_importer/utils/import_utils.py
--rw-r--r--  2.0 unx    11306 b- defN 23-May-12 14:59 odoo/addons/connector_importer/utils/mapper_utils.py
--rw-r--r--  2.0 unx     2418 b- defN 23-May-12 14:59 odoo/addons/connector_importer/utils/misc.py
--rw-r--r--  2.0 unx     4254 b- defN 23-May-12 14:59 odoo/addons/connector_importer/utils/report_html.py
--rw-r--r--  2.0 unx     6218 b- defN 23-May-12 14:59 odoo/addons/connector_importer/views/backend_views.xml
--rw-r--r--  2.0 unx     9503 b- defN 23-May-12 14:59 odoo/addons/connector_importer/views/docs_template.xml
--rw-r--r--  2.0 unx     1637 b- defN 23-May-12 14:59 odoo/addons/connector_importer/views/import_type_views.xml
--rw-r--r--  2.0 unx     5912 b- defN 23-May-12 14:59 odoo/addons/connector_importer/views/recordset_views.xml
--rw-r--r--  2.0 unx     2099 b- defN 23-May-12 14:59 odoo/addons/connector_importer/views/report_template.xml
--rw-r--r--  2.0 unx      576 b- defN 23-May-12 14:59 odoo/addons/connector_importer/views/source_config_template.xml
--rw-r--r--  2.0 unx     2616 b- defN 23-May-12 14:59 odoo/addons/connector_importer/views/source_views.xml
--rw-r--r--  2.0 unx     4764 b- defN 23-May-12 14:59 odoo14_addon_connector_importer-14.0.2.2.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-12 14:59 odoo14_addon_connector_importer-14.0.2.2.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-12 14:59 odoo14_addon_connector_importer-14.0.2.2.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     8240 b- defN 23-May-12 14:59 odoo14_addon_connector_importer-14.0.2.2.1.dist-info/RECORD
-75 files, 279864 bytes uncompressed, 86350 bytes compressed:  69.1%
+Zip file size: 100296 bytes, number of entries: 75
+-rw-r--r--  2.0 unx     4056 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/README.rst
+-rw-r--r--  2.0 unx       72 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/__init__.py
+-rw-r--r--  2.0 unx     1033 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/__manifest__.py
+-rw-r--r--  2.0 unx      985 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/events.py
+-rw-r--r--  2.0 unx      757 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/log.py
+-rw-r--r--  2.0 unx     1059 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/menuitems.xml
+-rw-r--r--  2.0 unx      227 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/__init__.py
+-rw-r--r--  2.0 unx      566 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/automapper.py
+-rw-r--r--  2.0 unx      332 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/base.py
+-rw-r--r--  2.0 unx     6506 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/dynamicmapper.py
+-rw-r--r--  2.0 unx    15079 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/importer.py
+-rw-r--r--  2.0 unx     6589 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/importer_csv_std.py
+-rw-r--r--  2.0 unx     4380 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/mapper.py
+-rw-r--r--  2.0 unx     9331 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/odoorecord.py
+-rw-r--r--  2.0 unx     1436 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/odoorecord_csv_std.py
+-rw-r--r--  2.0 unx     4204 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/components/tracker.py
+-rw-r--r--  2.0 unx       19 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/controllers/__init__.py
+-rw-r--r--  2.0 unx      788 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/controllers/main.py
+-rw-r--r--  2.0 unx      678 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/data/ir_cron.xml
+-rw-r--r--  2.0 unx      827 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/data/queue_job_function_data.xml
+-rw-r--r--  2.0 unx    32311 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/i18n/connector_importer.pot
+-rw-r--r--  2.0 unx      187 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/__init__.py
+-rw-r--r--  2.0 unx     5152 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/backend.py
+-rw-r--r--  2.0 unx     2499 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/cron_mixin.py
+-rw-r--r--  2.0 unx     5696 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/import_type.py
+-rw-r--r--  2.0 unx      903 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/job_mixin.py
+-rw-r--r--  2.0 unx     4078 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/record.py
+-rw-r--r--  2.0 unx    11612 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/recordset.py
+-rw-r--r--  2.0 unx     8955 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/reporter.py
+-rw-r--r--  2.0 unx       88 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/sources/__init__.py
+-rw-r--r--  2.0 unx     2409 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/sources/source_consumer_mixin.py
+-rw-r--r--  2.0 unx     4005 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/sources/source_csv.py
+-rw-r--r--  2.0 unx     4110 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/models/sources/source_mixin.py
+-rw-r--r--  2.0 unx      184 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      118 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     1027 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx     1402 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/security/ir.model.access.csv
+-rw-r--r--  2.0 unx      647 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/security/security.xml
+-rw-r--r--  2.0 unx     8186 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/static/description/icon.png
+-rw-r--r--  2.0 unx     4486 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/static/description/icon.svg
+-rw-r--r--  2.0 unx    13479 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/static/description/index.html
+-rw-r--r--  2.0 unx      344 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/__init__.py
+-rw-r--r--  2.0 unx     3171 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/common.py
+-rw-r--r--  2.0 unx     1814 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/fake_components.py
+-rw-r--r--  2.0 unx     1022 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/fake_models.py
+-rw-r--r--  2.0 unx      754 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/record_capturer.py
+-rw-r--r--  2.0 unx     1543 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_backend.py
+-rw-r--r--  2.0 unx     1505 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_cron.py
+-rw-r--r--  2.0 unx     5840 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_import_type.py
+-rw-r--r--  2.0 unx     5355 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_mapper.py
+-rw-r--r--  2.0 unx     2700 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_record_handler.py
+-rw-r--r--  2.0 unx     4451 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_record_importer.py
+-rw-r--r--  2.0 unx     4258 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_record_importer_basic.py
+-rw-r--r--  2.0 unx     1863 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_record_importer_xmlid.py
+-rw-r--r--  2.0 unx     3008 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_recordset.py
+-rw-r--r--  2.0 unx     3352 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_recordset_importer.py
+-rw-r--r--  2.0 unx     2760 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_source.py
+-rw-r--r--  2.0 unx     2990 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/test_source_csv.py
+-rw-r--r--  2.0 unx       85 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/tests/fixtures/csv_source_test1.csv
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/utils/__init__.py
+-rw-r--r--  2.0 unx     4114 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/utils/import_utils.py
+-rw-r--r--  2.0 unx    11306 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/utils/mapper_utils.py
+-rw-r--r--  2.0 unx     2418 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/utils/misc.py
+-rw-r--r--  2.0 unx     4254 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/utils/report_html.py
+-rw-r--r--  2.0 unx     6218 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/views/backend_views.xml
+-rw-r--r--  2.0 unx     9503 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/views/docs_template.xml
+-rw-r--r--  2.0 unx     1637 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/views/import_type_views.xml
+-rw-r--r--  2.0 unx     5912 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/views/recordset_views.xml
+-rw-r--r--  2.0 unx     2099 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/views/report_template.xml
+-rw-r--r--  2.0 unx      576 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/views/source_config_template.xml
+-rw-r--r--  2.0 unx     2616 b- defN 23-Jun-05 08:27 odoo/addons/connector_importer/views/source_views.xml
+-rw-r--r--  2.0 unx     4764 b- defN 23-Jun-05 08:27 odoo14_addon_connector_importer-14.0.2.3.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-05 08:27 odoo14_addon_connector_importer-14.0.2.3.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-05 08:27 odoo14_addon_connector_importer-14.0.2.3.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     8240 b- defN 23-Jun-05 08:27 odoo14_addon_connector_importer-14.0.2.3.0.dist-info/RECORD
+75 files, 281027 bytes uncompressed, 86482 bytes compressed:  69.2%
```

## zipnote {}

```diff
@@ -207,20 +207,20 @@
 
 Filename: odoo/addons/connector_importer/views/source_config_template.xml
 Comment: 
 
 Filename: odoo/addons/connector_importer/views/source_views.xml
 Comment: 
 
-Filename: odoo14_addon_connector_importer-14.0.2.2.1.dist-info/METADATA
+Filename: odoo14_addon_connector_importer-14.0.2.3.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_connector_importer-14.0.2.2.1.dist-info/WHEEL
+Filename: odoo14_addon_connector_importer-14.0.2.3.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_connector_importer-14.0.2.2.1.dist-info/top_level.txt
+Filename: odoo14_addon_connector_importer-14.0.2.3.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_connector_importer-14.0.2.2.1.dist-info/RECORD
+Filename: odoo14_addon_connector_importer-14.0.2.3.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/connector_importer/__manifest__.py

```diff
@@ -1,15 +1,15 @@
 # Author: Simone Orsi
 # Copyright 2018 Camptocamp SA
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 
 {
     "name": "Connector Importer",
     "summary": """This module takes care of import sessions.""",
-    "version": "14.0.2.2.1",
+    "version": "14.0.2.3.0",
     "depends": ["connector", "queue_job"],
     "author": "Camptocamp, Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "category": "Connector",
     "website": "https://github.com/OCA/connector-interfaces",
     "maintainers": ["simahawk"],
     "data": [
```

## odoo/addons/connector_importer/components/dynamicmapper.py

```diff
@@ -30,22 +30,22 @@
         required_keys = self._required_keys()
         missing_required_keys = []
         for source_fname in self._non_mapped_keys(clean_record):
             if source_fname in ("id", "xid::id"):
                 # Never convert IDs
                 continue
             fname = source_fname
-            if prefix and source_fname.startswith(prefix):
-                # Eg: prefix all supplier fields w/ `supplier_`
-                fname = fname[len(prefix) :]
-                clean_record[fname] = clean_record.pop(source_fname)
             if "::" in fname:
                 # Eg: transformers like `xid::``
                 fname = fname.split("::")[-1]
                 clean_record[fname] = clean_record.pop(source_fname)
+            if prefix and fname.startswith(prefix):
+                # Eg: prefix all supplier fields w/ `supplier.`
+                fname = fname[len(prefix) :]
+                clean_record[fname] = clean_record.pop(prefix + fname)
             if available_fields.get(fname):
                 fspec = available_fields.get(fname)
                 ftype = fspec["type"]
                 if self._is_xmlid_key(source_fname, ftype):
                     ftype = "_xmlid"
                 converter = self._get_converter(fname, ftype)
                 if converter:
@@ -74,15 +74,15 @@
         valid_keys = self._get_valid_keys(record)
         return {k: v for k, v in record.items() if k in valid_keys}
 
     def _get_valid_keys(self, record):
         valid_keys = [k for k in record.keys() if not k.startswith("_")]
         prefix = self._source_key_prefix
         if prefix:
-            valid_keys = [k for k in valid_keys if k.startswith(prefix)]
+            valid_keys = [k for k in valid_keys if prefix in k]
         whitelist = self._source_key_whitelist
         if whitelist:
             valid_keys = [k for k in valid_keys if k in whitelist]
         blacklist = self._source_key_blacklist
         if blacklist:
             valid_keys = [k for k in valid_keys if k not in blacklist]
         return tuple(valid_keys)
```

## odoo/addons/connector_importer/components/odoorecord.py

```diff
@@ -38,14 +38,16 @@
     def unique_key_is_xmlid(self):
         return self.importer.unique_key_is_xmlid
 
     def odoo_find_domain(self, values, orig_values):
         """Domain to find the record in odoo."""
         domain = self._odoo_find_domain_from_options(values, orig_values)
         if not domain:
+            if not self.unique_key:
+                raise ValueError("No unique key and no domain to find this record")
             domain = self._odoo_find_domain_from_unique_key(values, orig_values)
         return domain
 
     def _odoo_find_domain_from_options(self, values, orig_values):
         """Evaluate domain from options if any."""
         match_domain = self.work.options.record_handler.match_domain
         if not match_domain:
@@ -56,20 +58,23 @@
         )
         if not isinstance(domain, list):
             raise ValueError("match_domain must be a list")
         return domain
 
     def _domain_from_options_eval_ctx(self, values, orig_values):
         return {
+            "env": self.env,
             "user": self.env.user,
             "datetime": safe_eval.datetime,
             "dateutil": safe_eval.dateutil,
             "time": safe_eval.time,
             "values": values,
             "orig_values": orig_values,
+            "ref_id": lambda x: self._smart_ref(x).id,
+            "ref": lambda x: self._smart_ref(x),
         }
 
     def _odoo_find_domain_from_unique_key(self, values, orig_values):
         value = NO_VALUE
         if self.unique_key in values:
             value = values[self.unique_key]
         elif self.unique_key in orig_values:
@@ -90,14 +95,17 @@
         item = self.model.search(
             self.odoo_find_domain(values, orig_values),
             order="create_date desc",
             limit=1,
         )
         return item
 
+    def _smart_ref(self, xid):
+        return self.env.ref(sanitize_external_id(xid))
+
     def _get_xmlid(self, values, orig_values):
         # Mappers will remove `xid::` prefix from the final values
         # hence, look for the original key.
         return sanitize_external_id(orig_values.get(self.unique_key))
 
     def odoo_exists(self, values, orig_values):
         """Return true if the items exists."""
```

## odoo/addons/connector_importer/tests/test_mapper.py

```diff
@@ -119,14 +119,35 @@
             "name": "John Doe",
             "ref": "12345",
             "parent_id": self.env.ref("base.res_partner_10").id,
             "category_id": [(6, 0, categs.ids)],
         }
         self.assertEqual(mapper.dynamic_fields(rec), expected)
 
+    def test_dynamic_mapper_values_with_prefix(self):
+        mapper = self._get_dynamyc_mapper(options=dict(source_key_prefix="foo."))
+        rec = {}
+        expected = {}
+        categs = self.env.ref("base.res_partner_category_0") + self.env.ref(
+            "base.res_partner_category_2"
+        )
+        rec = {
+            "foo.name": "John Doe",
+            "ref": "12345",
+            "xid::foo.parent_id": "base.res_partner_10",
+            "xid::foo.category_id": "base.res_partner_category_0,base.res_partner_category_2",
+            "title_id": "Doctor",
+        }
+        expected = {
+            "name": "John Doe",
+            "parent_id": self.env.ref("base.res_partner_10").id,
+            "category_id": [(6, 0, categs.ids)],
+        }
+        self.assertEqual(mapper.dynamic_fields(rec), expected)
+
     def test_dynamic_mapper_skip_empty(self):
         rec = {
             "name": "John Doe",
             "ref": "",
         }
         # Whitelist
         expected = {
```

## odoo/addons/connector_importer/tests/test_record_importer_xmlid.py

```diff
@@ -27,15 +27,17 @@
 
     @mute_logger("[importer]")
     def test_importer_create(self):
         self.import_type.write(
             {
                 "options": """
 - model: res.partner
-  importer: fake.partner.importer.xmlid
+  importer:
+    name:
+      fake.partner.importer.xmlid
                 """
             }
         )
         # generate 10 records
         count = 10
         lines = self._fake_lines(count, keys=("id", "fullname"))
         # set them on record
```

## Comparing `odoo14_addon_connector_importer-14.0.2.2.1.dist-info/METADATA` & `odoo14_addon_connector_importer-14.0.2.3.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-connector-importer
-Version: 14.0.2.2.1
+Version: 14.0.2.3.0
 Summary: This module takes care of import sessions.
 Home-page: https://github.com/OCA/connector-interfaces
 Author: Camptocamp, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_connector_importer-14.0.2.2.1.dist-info/RECORD` & `odoo14_addon_connector_importer-14.0.2.3.0.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 odoo/addons/connector_importer/README.rst,sha256=uvfiXXWG9O758SjPvOL_cS5OxJIDmq8X7Yvxc9zM9Wo,4056
 odoo/addons/connector_importer/__init__.py,sha256=5SeaXt24NrD4Cl8GdTw9cCoQGGsXBtNqjgaG5NwJZB8,72
-odoo/addons/connector_importer/__manifest__.py,sha256=tw2pPXVUybFLrpGeuFN_tR24sUSZ7X8wo1ai8b1xScc,1033
+odoo/addons/connector_importer/__manifest__.py,sha256=3ooMJgE0mIDgSellfdt5GWlWgyF9-7Qi17SogcQVq6o,1033
 odoo/addons/connector_importer/events.py,sha256=zCYEllpQE1FFKv_5HFzVDYJ3VrTe184JqD46tL661-Q,985
 odoo/addons/connector_importer/log.py,sha256=MFjVgOU0c3dRyBViLa8kiV7b3gYpE0cXc8_lD2qmgcc,757
 odoo/addons/connector_importer/menuitems.xml,sha256=9MWWuMwaebl0PByML1VYnaiz9BscvUwedEa8gJnfLYM,1059
 odoo/addons/connector_importer/components/__init__.py,sha256=R7E960FPDtW9OXhWEyIwd8Bfez2xXtrlMCzqxX8xsCs,227
 odoo/addons/connector_importer/components/automapper.py,sha256=N7gpp-NzFXvQN4uxfvRGaA-2uIzGMmEf1f8RctWezfc,566
 odoo/addons/connector_importer/components/base.py,sha256=SXRDM0H_I13Eu_qfUvZ9xaCZplXf9PSnAt1ydhJ176s,332
-odoo/addons/connector_importer/components/dynamicmapper.py,sha256=nncWvvfP8AAVTe4g8eLWEVIzEmM5PnCwfpbI387vyl8,6520
+odoo/addons/connector_importer/components/dynamicmapper.py,sha256=u1smhGQFtQs_YNiiupCoFiJW6oZocf7pk-lGFBPP8vw,6506
 odoo/addons/connector_importer/components/importer.py,sha256=G200k6m9w-6OTPBxPFXyWIBBDjQwICHEkgni4qw8mZ4,15079
 odoo/addons/connector_importer/components/importer_csv_std.py,sha256=A50NzEH5ZJY_6jmpZbaPoakVX6oDxNWDdUSkSZ92A9Q,6589
 odoo/addons/connector_importer/components/mapper.py,sha256=xCHab-xVM0sbqkunZEUZwmuMHoTEGlnDes7cI6zYegA,4380
-odoo/addons/connector_importer/components/odoorecord.py,sha256=GDMV11jQ-U7EdZog7Y5mwKA1pm_9zYwBKt0LrdmFulk,8991
+odoo/addons/connector_importer/components/odoorecord.py,sha256=ozhWa7Qr1mfMOPwcIQ4IXyrHN3S2xsbLILb_bdmdY70,9331
 odoo/addons/connector_importer/components/odoorecord_csv_std.py,sha256=2a6suU7GEcbfJNYqpmwB0ABJVj0pTiuATAKQP0M02Cs,1436
 odoo/addons/connector_importer/components/tracker.py,sha256=LVATxle9Cme4mcs37Y0pdJqExRFnK-QrzeFjws1I2zU,4204
 odoo/addons/connector_importer/controllers/__init__.py,sha256=4KFqEP2QHFbPN66eQJMdGsmNz2v7ywWv_FR1pW_kkLk,19
 odoo/addons/connector_importer/controllers/main.py,sha256=nhoRxonfXSGRgiU4b3ZG_-VnOXx40fZbpgZucdvVilU,788
 odoo/addons/connector_importer/data/ir_cron.xml,sha256=rOMNu38Eyf6oP_wZ_RrGaLYAw2ppps1LeVAn3MRCvdY,678
 odoo/addons/connector_importer/data/queue_job_function_data.xml,sha256=2NLyI0tIRNqHCK6LzLR2HxqlJbP_IkXhdSWBRckEcrA,827
 odoo/addons/connector_importer/i18n/connector_importer.pot,sha256=C68K6cY8dM9q1QCqrssitDzrMqm9seXpou5Z1maCPWU,32311
@@ -43,19 +43,19 @@
 odoo/addons/connector_importer/tests/common.py,sha256=KXQEdAMczgXrWPaw78Lh9nrM8wM2rLo_--jNXd6qdik,3171
 odoo/addons/connector_importer/tests/fake_components.py,sha256=g8BGXc3KkKtubuKgUlT3fulR9KuzpeaDOreEZ4joAC4,1814
 odoo/addons/connector_importer/tests/fake_models.py,sha256=n14ncv6ivEJAwBZIKbyLpouFs8bji_W8UcBg-urcYuI,1022
 odoo/addons/connector_importer/tests/record_capturer.py,sha256=mpWzbqOsXd2fykIJ6O1_gngtroOZNa9Cl-PgR1giFak,754
 odoo/addons/connector_importer/tests/test_backend.py,sha256=CIgsUfTvZQ579jI6TOdYbiyY94MYoKZHmLgQ8vbCjUQ,1543
 odoo/addons/connector_importer/tests/test_cron.py,sha256=37fIpfhOc64J47NKI5E-kgW3aEGApAWuvRzYvgjerYM,1505
 odoo/addons/connector_importer/tests/test_import_type.py,sha256=BN5rncBa0zT8fMnLeMOBnxO1QKfwWcojlcKuCEFYHfk,5840
-odoo/addons/connector_importer/tests/test_mapper.py,sha256=sMnR2AyepTDJ9sug8Sk2PgVbrq95tKuOXrVmYrAmxXw,4534
+odoo/addons/connector_importer/tests/test_mapper.py,sha256=tOGTiPFkkhAb_A3OYTQd7mhHgEjGX-zNM3yJbDFMiX8,5355
 odoo/addons/connector_importer/tests/test_record_handler.py,sha256=ihbyP3dYFMW1xN3Lvch1XuwfwN1FFXCzSDkoWarI-XY,2700
 odoo/addons/connector_importer/tests/test_record_importer.py,sha256=LIv0E2_nrfGPRk0aV1sUj-dglFDnsDGqc4HsNO1M0y0,4451
 odoo/addons/connector_importer/tests/test_record_importer_basic.py,sha256=Ujynpv0ElQq7qEr9nHjQ3yWoDOoXog6jb0A6cH5sKAo,4258
-odoo/addons/connector_importer/tests/test_record_importer_xmlid.py,sha256=4Qcp7o7tNbfpm7YJ8rS-IUnZyvA3Z0R9vvHI1WVPGdU,1847
+odoo/addons/connector_importer/tests/test_record_importer_xmlid.py,sha256=URFrgkXv-eRkgl-EfviiQhc5ipHb_wFTZMxGQm-rrsE,1863
 odoo/addons/connector_importer/tests/test_recordset.py,sha256=KcwunzLbNWV-yCSka-qYaKvIAV26djAP-NJ1186MYVA,3008
 odoo/addons/connector_importer/tests/test_recordset_importer.py,sha256=qXK23Bg6_-2y3UyvsRjvA2GAuivKmt_uLMqqVTdKhvg,3352
 odoo/addons/connector_importer/tests/test_source.py,sha256=U-dbcxAjoWCmDrwuQ_Y-spLCU7yq-8Ah9hif_1vRFeQ,2760
 odoo/addons/connector_importer/tests/test_source_csv.py,sha256=XhUbTxKsBiZ9jIkcMb6mfGTEDMseHdSV3vCXxsoaB3k,2990
 odoo/addons/connector_importer/tests/fixtures/csv_source_test1.csv,sha256=Eny0O_lQM8KuBAuF7fwHLM_Zsbk03i79olGfEWa6SS8,85
 odoo/addons/connector_importer/utils/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 odoo/addons/connector_importer/utils/import_utils.py,sha256=kb0pb6Se-jUiIUhX-tyHc5DW7XSIjgLxNAPVq6zBO0M,4114
@@ -65,11 +65,11 @@
 odoo/addons/connector_importer/views/backend_views.xml,sha256=ed8t86WnZLFw9rgdUcTdstvTkOaCZU7Qd1x7iW6GCEk,6218
 odoo/addons/connector_importer/views/docs_template.xml,sha256=QHQgJtlEBqulmLzpulpHiAGSnHmkEYds-hGsf55AOmw,9503
 odoo/addons/connector_importer/views/import_type_views.xml,sha256=hklf5eaJ0NVGJDr3-tDr-ZXJy3I4IbTHoUKOsahdeHU,1637
 odoo/addons/connector_importer/views/recordset_views.xml,sha256=34TTS_vyNAskBZxSUqzhLVOV7XYFok0_jbP_qJnyXwg,5912
 odoo/addons/connector_importer/views/report_template.xml,sha256=DLYJgdxWw2FoH-1IFaKqQ5Vpl_J7wEzryPonpTGUzxc,2099
 odoo/addons/connector_importer/views/source_config_template.xml,sha256=LzIiidOvDNBRQV_5byrSQK6gyVDxcbVr4rlnxLTkKgw,576
 odoo/addons/connector_importer/views/source_views.xml,sha256=-8V2OP0V2Ier1ulc8L9mhY7mp104HkbVHGJj64e7Kkc,2616
-odoo14_addon_connector_importer-14.0.2.2.1.dist-info/METADATA,sha256=1jRVIPuGEwWavdm5nZSkhXeAR7XYb6gHl3fazNXX7SM,4764
-odoo14_addon_connector_importer-14.0.2.2.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo14_addon_connector_importer-14.0.2.2.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_connector_importer-14.0.2.2.1.dist-info/RECORD,,
+odoo14_addon_connector_importer-14.0.2.3.0.dist-info/METADATA,sha256=QYqQPcIMNBNq0TTZv-ldsu_pVwDmdDvgf_XIlooIr1k,4764
+odoo14_addon_connector_importer-14.0.2.3.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo14_addon_connector_importer-14.0.2.3.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_connector_importer-14.0.2.3.0.dist-info/RECORD,,
```

