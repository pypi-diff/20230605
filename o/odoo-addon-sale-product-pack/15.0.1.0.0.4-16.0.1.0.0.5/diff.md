# Comparing `tmp/odoo_addon_sale_product_pack-15.0.1.0.0.4-py3-none-any.whl.zip` & `tmp/odoo_addon_sale_product_pack-16.0.1.0.0.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,32 +1,31 @@
-Zip file size: 42634 bytes, number of entries: 30
--rw-r--r--  2.0 unx     4382 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/README.rst
--rw-r--r--  2.0 unx       90 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/__init__.py
--rw-r--r--  2.0 unx      679 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/__manifest__.py
--rw-r--r--  2.0 unx     1089 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/demo/product_pack_line_demo.xml
--rw-r--r--  2.0 unx     7103 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/ca.po
--rw-r--r--  2.0 unx     5365 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/ca_ES.po
--rw-r--r--  2.0 unx     6841 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/es.po
--rw-r--r--  2.0 unx     5758 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/es_AR.po
--rw-r--r--  2.0 unx     6876 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/fr.po
--rw-r--r--  2.0 unx     5717 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/nl.po
--rw-r--r--  2.0 unx     6682 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/pt.po
--rw-r--r--  2.0 unx     4278 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/i18n/sale_product_pack.pot
--rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/models/__init__.py
--rw-r--r--  2.0 unx     1814 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/models/product_pack_line.py
--rw-r--r--  2.0 unx     2347 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/models/sale_order.py
--rw-r--r--  2.0 unx     4172 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/models/sale_order_line.py
--rw-r--r--  2.0 unx      261 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      230 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      300 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      708 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/readme/USAGE.rst
--rw-r--r--  2.0 unx      195 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/static/description/icon.png
--rw-r--r--  2.0 unx    14275 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/static/description/index.html
--rw-r--r--  2.0 unx      107 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/tests/__init__.py
--rw-r--r--  2.0 unx     9385 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/tests/test_sale_product_pack.py
--rw-r--r--  2.0 unx     2162 b- defN 23-Apr-09 06:34 odoo/addons/sale_product_pack/views/product_pack_line_views.xml
--rw-r--r--  2.0 unx     5021 b- defN 23-Apr-09 06:34 odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-09 06:34 odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Apr-09 06:34 odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3165 b- defN 23-Apr-09 06:34 odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/RECORD
-30 files, 108711 bytes uncompressed, 37286 bytes compressed:  65.7%
+Zip file size: 41412 bytes, number of entries: 29
+-rw-r--r--  2.0 unx     4440 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/README.rst
+-rw-r--r--  2.0 unx       90 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/__init__.py
+-rw-r--r--  2.0 unx      679 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/__manifest__.py
+-rw-r--r--  2.0 unx     1089 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/demo/product_pack_line_demo.xml
+-rw-r--r--  2.0 unx     7103 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/i18n/ca.po
+-rw-r--r--  2.0 unx     5365 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/i18n/ca_ES.po
+-rw-r--r--  2.0 unx     6841 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/i18n/es.po
+-rw-r--r--  2.0 unx     6876 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/i18n/fr.po
+-rw-r--r--  2.0 unx     5717 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/i18n/nl.po
+-rw-r--r--  2.0 unx     6682 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/i18n/pt.po
+-rw-r--r--  2.0 unx     4323 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/i18n/sale_product_pack.pot
+-rw-r--r--  2.0 unx      157 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/models/__init__.py
+-rw-r--r--  2.0 unx     1761 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/models/product_pack_line.py
+-rw-r--r--  2.0 unx     2764 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/models/sale_order.py
+-rw-r--r--  2.0 unx     4571 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/models/sale_order_line.py
+-rw-r--r--  2.0 unx      319 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      230 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      300 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      708 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/readme/USAGE.rst
+-rw-r--r--  2.0 unx      195 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/static/description/icon.png
+-rw-r--r--  2.0 unx    14390 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/static/description/index.html
+-rw-r--r--  2.0 unx      107 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/tests/__init__.py
+-rw-r--r--  2.0 unx    11445 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/tests/test_sale_product_pack.py
+-rw-r--r--  2.0 unx     2162 b- defN 23-Jun-05 16:24 odoo/addons/sale_product_pack/views/product_pack_line_views.xml
+-rw-r--r--  2.0 unx     5080 b- defN 23-Jun-05 16:24 odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-05 16:24 odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-05 16:24 odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3066 b- defN 23-Jun-05 16:24 odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/RECORD
+29 files, 106012 bytes uncompressed, 36226 bytes compressed:  65.8%
```

## zipnote {}

```diff
@@ -15,17 +15,14 @@
 
 Filename: odoo/addons/sale_product_pack/i18n/ca_ES.po
 Comment: 
 
 Filename: odoo/addons/sale_product_pack/i18n/es.po
 Comment: 
 
-Filename: odoo/addons/sale_product_pack/i18n/es_AR.po
-Comment: 
-
 Filename: odoo/addons/sale_product_pack/i18n/fr.po
 Comment: 
 
 Filename: odoo/addons/sale_product_pack/i18n/nl.po
 Comment: 
 
 Filename: odoo/addons/sale_product_pack/i18n/pt.po
@@ -72,20 +69,20 @@
 
 Filename: odoo/addons/sale_product_pack/tests/test_sale_product_pack.py
 Comment: 
 
 Filename: odoo/addons/sale_product_pack/views/product_pack_line_views.xml
 Comment: 
 
-Filename: odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/METADATA
+Filename: odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/WHEEL
+Filename: odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/top_level.txt
+Filename: odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/RECORD
+Filename: odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/sale_product_pack/README.rst

```diff
@@ -10,21 +10,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fproduct--pack-lightgray.png?logo=github
-    :target: https://github.com/OCA/product-pack/tree/15.0/sale_product_pack
+    :target: https://github.com/OCA/product-pack/tree/16.0/sale_product_pack
     :alt: OCA/product-pack
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/product-pack-15-0/product-pack-15-0-sale_product_pack
+    :target: https://translation.odoo-community.org/projects/product-pack-16-0/product-pack-16-0-sale_product_pack
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/286/15.0
+    :target: https://runbot.odoo-community.org/runbot/286/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module adds *Product Pack* functionality to sales orders. You can choose
 a *Pack* in *sales order lines* and see different behaviors depending on
 "Pack type" and "Pack component price" fields options selected on this *Pack*.
@@ -61,15 +61,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/product-pack/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/product-pack/issues/new?body=module:%20sale_product_pack%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/product-pack/issues/new?body=module:%20sale_product_pack%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -91,14 +91,18 @@
 
   * Raphaël Reverdy
 
 * `Open Source Integrators <https://opensourceintegrators.eu>`_:
 
   * Daniel Reis <dreis@opensourceintegrators.com>
 
+* `Acsone <https://www.acsone.eu/>`_:
+
+  * Maxime Franco
+
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
@@ -112,10 +116,10 @@
     :target: https://github.com/ernestotejeda
     :alt: ernestotejeda
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-ernestotejeda| 
 
-This module is part of the `OCA/product-pack <https://github.com/OCA/product-pack/tree/15.0/sale_product_pack>`_ project on GitHub.
+This module is part of the `OCA/product-pack <https://github.com/OCA/product-pack/tree/16.0/sale_product_pack>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/sale_product_pack/__manifest__.py

```diff
@@ -1,12 +1,12 @@
 # Copyright 2019 NaN (http://www.nan-tic.com) - Àngel Àlvarez
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "Sale Product Pack",
-    "version": "15.0.1.0.0",
+    "version": "16.0.1.0.0",
     "category": "Sales",
     "summary": "This module allows you to sell product packs",
     "website": "https://github.com/OCA/product-pack",
     "author": "NaN·tic, ADHOC SA, Tecnativa, Odoo Community Association (OCA)",
     "maintainers": ["ernestotejeda"],
     "license": "AGPL-3",
     "depends": ["product_pack", "sale"],
```

## odoo/addons/sale_product_pack/i18n/sale_product_pack.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* sale_product_pack
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -72,14 +72,15 @@
 
 #. module: sale_product_pack
 #: model_terms:ir.ui.view,arch_db:sale_product_pack.view_order_form
 msgid "Parent Pack is not modifiable"
 msgstr ""
 
 #. module: sale_product_pack
+#. odoo-python
 #: code:addons/sale_product_pack/models/sale_order_line.py:0
 #, python-format
 msgid "Parent Product"
 msgstr ""
 
 #. module: sale_product_pack
 #: model:ir.model,name:sale_product_pack.model_product_pack_line
@@ -114,21 +115,23 @@
 #. module: sale_product_pack
 #: model:ir.model.fields,help:sale_product_pack.field_sale_order_line__do_no_expand_pack_lines
 msgid ""
 "This is a technical field in order to check if pack lines has to be expanded"
 msgstr ""
 
 #. module: sale_product_pack
+#. odoo-python
 #: code:addons/sale_product_pack/models/sale_order_line.py:0
 #, python-format
 msgid ""
 "You can not change this line because is part of a pack included in this "
 "order"
 msgstr ""
 
 #. module: sale_product_pack
+#. odoo-python
 #: code:addons/sale_product_pack/models/sale_order.py:0
 #, python-format
 msgid ""
 "You cannot delete this line because is part of a pack in this sale order. In"
 " order to delete this line you need to delete the pack itself"
 msgstr ""
```

## odoo/addons/sale_product_pack/models/product_pack_line.py

```diff
@@ -18,20 +18,18 @@
             "order_id": order.id,
             "sequence": line.sequence,
             "product_id": self.product_id.id or False,
             "pack_parent_line_id": line.id,
             "pack_depth": line.pack_depth + 1,
             "company_id": order.company_id.id,
             "pack_modifiable": line.product_id.pack_modifiable,
+            "product_uom_qty": quantity,
         }
         sol = line.new(line_vals)
-        sol.product_id_change()
-        sol.product_uom_qty = quantity
-        sol.product_uom_change()
-        sol._onchange_discount()
+        sol._onchange_product_id_warning()
         vals = sol._convert_to_write(sol._cache)
         pack_price_types = {"totalized", "ignored"}
         sale_discount = 0.0
         if line.product_id.pack_component_price == "detailed":
             sale_discount = 100.0 - (
                 (100.0 - sol.discount) * (100.0 - self.sale_discount) / 100.0
             )
```

## odoo/addons/sale_product_pack/models/sale_order.py

```diff
@@ -53,7 +53,19 @@
                     if cmd[1] in subpacks_to_delete_ids:
                         if cmd[0] != 2:
                             cmd[0] = 2
                         subpacks_to_delete_ids.remove(cmd[1])
                 for to_delete_id in subpacks_to_delete_ids:
                     vals["order_line"].append([2, to_delete_id, False])
         return super().write(vals)
+
+    def _get_update_prices_lines(self):
+        res = super()._get_update_prices_lines()
+        result = self.order_line.browse()
+        index = 0
+        while index < len(res):
+            line = res[index]
+            result |= line
+            index += 1
+            if line.product_id.pack_ok and line.pack_type == "detailed":
+                index += len(line.product_id.pack_line_ids)
+        return result
```

## odoo/addons/sale_product_pack/models/sale_order_line.py

```diff
@@ -69,19 +69,28 @@
                     elif not self.do_no_expand_pack_lines:
                         vals_list.append(vals)
                 else:
                     vals_list.append(vals)
             if vals_list:
                 self.create(vals_list)
 
-    @api.model
-    def create(self, vals):
-        record = super().create(vals)
-        record.expand_pack_line()
-        return record
+    @api.model_create_multi
+    def create(self, vals_list):
+        new_vals = []
+        res = self.browse()
+        for elem in vals_list:
+            product = self.env["product.product"].browse(elem.get("product_id"))
+            if product and product.pack_ok and product.pack_type != "non_detailed":
+                line = super().create([elem])
+                line.expand_pack_line()
+                res |= line
+            else:
+                new_vals.append(elem)
+        res |= super().create(new_vals)
+        return res
 
     def write(self, vals):
         res = super().write(vals)
         if "product_id" in vals or "product_uom_qty" in vals:
             for record in self:
                 record.expand_pack_line(write=True)
         return res
```

## odoo/addons/sale_product_pack/readme/CONTRIBUTORS.rst

```diff
@@ -6,7 +6,11 @@
 * `Akretion <https://akretion.com>`_:
 
   * Raphaël Reverdy
 
 * `Open Source Integrators <https://opensourceintegrators.eu>`_:
 
   * Daniel Reis <dreis@opensourceintegrators.com>
+
+* `Acsone <https://www.acsone.eu/>`_:
+
+  * Maxime Franco
```

## odoo/addons/sale_product_pack/static/description/index.html

### odoo/addons/sale_product_pack/static/description/index.html

```diff
@@ -367,21 +367,21 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/product-pack/tree/15.0/sale_product_pack">
+        <a class="reference external" href="https://github.com/OCA/product-pack/tree/16.0/sale_product_pack">
           <img alt="OCA/product-pack" src="https://img.shields.io/badge/github-OCA%2Fproduct--pack-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/product-pack-15-0/product-pack-15-0-sale_product_pack">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/product-pack-16-0/product-pack-16-0-sale_product_pack">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/286/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/286/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>
         This module adds
         <em>Product Pack</em>
         functionality to sales orders. You can choose
@@ -490,15 +490,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/product-pack/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/product-pack/issues/new?body=module:%20sale_product_pack%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/product-pack/issues/new?body=module:%20sale_product_pack%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id4">Credits</a>
@@ -540,14 +540,21 @@
                 <li>
                   Daniel Reis &lt;
                   <a class="reference external" href="mailto:dreis@opensourceintegrators.com">dreis@opensourceintegrators.com</a>
                   &gt;
                 </li>
               </ul>
             </li>
+            <li>
+              <a class="reference external" href="https://www.acsone.eu/">Acsone</a>
+              :
+              <ul>
+                <li>Maxime Franco</li>
+              </ul>
+            </li>
           </ul>
         </div>
         <div class="section" id="maintainers">
           <h2>
             <a class="toc-backref" href="#id7">Maintainers</a>
           </h2>
           <p>This module is maintained by the OCA.</p>
@@ -565,15 +572,15 @@
           <p>
             <a class="reference external" href="https://github.com/ernestotejeda">
               <img alt="ernestotejeda" src="https://github.com/ernestotejeda.png?size=40px"/>
             </a>
           </p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/product-pack/tree/15.0/sale_product_pack">OCA/product-pack</a>
+            <a class="reference external" href="https://github.com/OCA/product-pack/tree/16.0/sale_product_pack">OCA/product-pack</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/sale_product_pack/tests/test_sale_product_pack.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2019 Tecnativa - Ernesto Tejeda
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 
-from odoo.tests import SavepointCase
+from odoo.tests.common import TransactionCase
 
 
-class TestSaleProductPack(SavepointCase):
+class TestSaleProductPack(TransactionCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
         pricelist = cls.env["product.pricelist"].create(
             {
                 "name": "Test",
                 "company_id": cls.env.company.id,
@@ -21,14 +21,31 @@
                             "compute_price": "formula",
                             "base": "list_price",
                         },
                     )
                 ],
             }
         )
+        cls.discount_pricelist = cls.env["product.pricelist"].create(
+            {
+                "name": "Discount",
+                "company_id": cls.env.company.id,
+                "item_ids": [
+                    (
+                        0,
+                        0,
+                        {
+                            "applied_on": "3_global",
+                            "compute_price": "percentage",
+                            "percent_price": 10,
+                        },
+                    )
+                ],
+            }
+        )
         cls.sale_order = cls.env["sale.order"].create(
             {
                 "company_id": cls.env.company.id,
                 "partner_id": cls.env.ref("base.res_partner_12").id,
                 "pricelist_id": pricelist.id,
             }
         )
@@ -40,39 +57,53 @@
                 1 - (pack_line.sale_discount or 0.0) / 100.0
             )
             component_prices += product_line_price * pack_line.quantity
         return component_prices
 
     def test_create_components_price_order_line(self):
         product_cp = self.env.ref("product_pack.product_pack_cpu_detailed_components")
-        self.env["sale.order.line"].create(
+        line = self.env["sale.order.line"].create(
             {
                 "order_id": self.sale_order.id,
                 "name": product_cp.name,
                 "product_id": product_cp.id,
                 "product_uom_qty": 1,
             }
         )
         # After create, there will be four lines
         self.assertEqual(len(self.sale_order.order_line), 4)
         pack_line = self.sale_order.order_line.filtered(
-            lambda line: line.product_id == product_cp
+            lambda pline: pline.product_id == product_cp
         )
         # Check if sequence is the same as pack product one
         sequence = pack_line.sequence
         self.assertEqual(
             [sequence, sequence, sequence, sequence],
             self.sale_order.order_line.mapped("sequence"),
         )
         # The products of those four lines are the main product pack and its
         # product components
         self.assertEqual(
             self.sale_order.order_line.mapped("product_id"),
             product_cp | product_cp.get_pack_lines().mapped("product_id"),
         )
+        # Price before update pricelist
+        self.assertAlmostEqual(line.price_subtotal, 30.75)
+        self.assertEqual(
+            (self.sale_order.order_line - line).mapped("price_subtotal"),
+            [1755.0, 22.5, 885.0],
+        )
+        # Update pricelist with a discount
+        self.sale_order.pricelist_id = self.discount_pricelist
+        self.sale_order.action_update_prices()
+        self.assertAlmostEqual(line.price_subtotal, 27.68)
+        self.assertEqual(
+            (self.sale_order.order_line - line).mapped("price_subtotal"),
+            [1755.0, 22.5, 885.0],
+        )
 
     def test_create_ignored_price_order_line(self):
         product_tp = self.env.ref("product_pack.product_pack_cpu_detailed_ignored")
         line = self.env["sale.order.line"].create(
             {
                 "order_id": self.sale_order.id,
                 "name": product_tp.name,
@@ -92,14 +123,22 @@
         self.assertEqual(
             (self.sale_order.order_line - line).mapped("price_subtotal"), [0, 0, 0]
         )
         # Pack price is different from the sum of component prices
         self.assertAlmostEqual(line.price_subtotal, 30.75)
         self.assertNotEqual(self._get_component_prices_sum(product_tp), 30.75)
 
+        # Update pricelist with a discount
+        self.sale_order.pricelist_id = self.discount_pricelist
+        self.sale_order.action_update_prices()
+        self.assertAlmostEqual(line.price_subtotal, 27.68)
+        self.assertEqual(
+            (self.sale_order.order_line - line).mapped("price_subtotal"), [0, 0, 0]
+        )
+
     def test_create_totalized_price_order_line(self):
         product_tp = self.env.ref("product_pack.product_pack_cpu_detailed_totalized")
         line = self.env["sale.order.line"].create(
             {
                 "order_id": self.sale_order.id,
                 "name": product_tp.name,
                 "product_id": product_tp.id,
@@ -118,14 +157,22 @@
         self.assertAlmostEqual(
             (self.sale_order.order_line - line).mapped("price_subtotal"), [0, 0, 0]
         )
         # Pack price is equal to the sum of component prices
         self.assertAlmostEqual(line.price_subtotal, 2662.5)
         self.assertAlmostEqual(self._get_component_prices_sum(product_tp), 2662.5)
 
+        # Update pricelist with a discount
+        self.sale_order.pricelist_id = self.discount_pricelist
+        self.sale_order.action_update_prices()
+        self.assertAlmostEqual(line.price_subtotal, 2396.25)
+        self.assertEqual(
+            (self.sale_order.order_line - line).mapped("price_subtotal"), [0, 0, 0]
+        )
+
     def test_create_non_detailed_price_order_line(self):
         product_ndtp = self.env.ref("product_pack.product_pack_cpu_non_detailed")
         line = self.env["sale.order.line"].create(
             {
                 "order_id": self.sale_order.id,
                 "name": product_ndtp.name,
                 "product_id": product_ndtp.id,
@@ -135,14 +182,19 @@
         # After create, there will be only one line, because product_type is
         # not a detailed one
         self.assertEqual(self.sale_order.order_line, line)
         # Pack price is equal to the sum of component prices
         self.assertAlmostEqual(line.price_subtotal, 2662.5)
         self.assertAlmostEqual(self._get_component_prices_sum(product_ndtp), 2662.5)
 
+        # Update pricelist with a discount
+        self.sale_order.pricelist_id = self.discount_pricelist
+        self.sale_order.action_update_prices()
+        self.assertAlmostEqual(line.price_subtotal, 2396.25)
+
     def test_update_qty(self):
         # Ensure the quantities are always updated
 
         def qty_in_order():
             return sum(self.sale_order.order_line.mapped("product_uom_qty"))
 
         product_cp = self.env.ref("product_pack.product_pack_cpu_detailed_components")
```

## Comparing `odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/METADATA` & `odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 Metadata-Version: 2.1
 Name: odoo-addon-sale-product-pack
-Version: 15.0.1.0.0.4
+Version: 16.0.1.0.0.5
 Summary: This module allows you to sell product packs
 Home-page: https://github.com/OCA/product-pack
 Author: NaN·tic, ADHOC SA, Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.8
-Requires-Dist: odoo-addon-product-pack (<15.1dev,>=15.0dev)
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo-addon-product-pack (<16.1dev,>=16.0dev)
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 
 =================
 Sale Product Pack
 =================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
@@ -27,21 +27,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fproduct--pack-lightgray.png?logo=github
-    :target: https://github.com/OCA/product-pack/tree/15.0/sale_product_pack
+    :target: https://github.com/OCA/product-pack/tree/16.0/sale_product_pack
     :alt: OCA/product-pack
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/product-pack-15-0/product-pack-15-0-sale_product_pack
+    :target: https://translation.odoo-community.org/projects/product-pack-16-0/product-pack-16-0-sale_product_pack
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/286/15.0
+    :target: https://runbot.odoo-community.org/runbot/286/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module adds *Product Pack* functionality to sales orders. You can choose
 a *Pack* in *sales order lines* and see different behaviors depending on
 "Pack type" and "Pack component price" fields options selected on this *Pack*.
@@ -78,15 +78,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/product-pack/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/product-pack/issues/new?body=module:%20sale_product_pack%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/product-pack/issues/new?body=module:%20sale_product_pack%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -108,14 +108,18 @@
 
   * Raphaël Reverdy
 
 * `Open Source Integrators <https://opensourceintegrators.eu>`_:
 
   * Daniel Reis <dreis@opensourceintegrators.com>
 
+* `Acsone <https://www.acsone.eu/>`_:
+
+  * Maxime Franco
+
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
@@ -129,12 +133,12 @@
     :target: https://github.com/ernestotejeda
     :alt: ernestotejeda
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-ernestotejeda| 
 
-This module is part of the `OCA/product-pack <https://github.com/OCA/product-pack/tree/15.0/sale_product_pack>`_ project on GitHub.
+This module is part of the `OCA/product-pack <https://github.com/OCA/product-pack/tree/16.0/sale_product_pack>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/RECORD` & `odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,30 +1,29 @@
-odoo/addons/sale_product_pack/README.rst,sha256=L_lXfMy-59mBN9ECWME9_ciAixOffCtX7bc2-H9KJeI,4382
+odoo/addons/sale_product_pack/README.rst,sha256=9O9TIzd54Tz1nyc-1gkob0UjNQMqUI0wxRApiB33KBM,4440
 odoo/addons/sale_product_pack/__init__.py,sha256=yAhRN-0brM5BREVEJKYIFm90JTLh3VpkjM5sQCDoHxE,90
-odoo/addons/sale_product_pack/__manifest__.py,sha256=DQzXAyMjARv0nTlMzetqR-ZNFSs6GHpftT1TmZvFfHE,679
+odoo/addons/sale_product_pack/__manifest__.py,sha256=RwEJ39cszHoAgZEcLLcG9lVW5_6U_y6arvY48vLsH3o,679
 odoo/addons/sale_product_pack/demo/product_pack_line_demo.xml,sha256=6sor39rLR6Z5juYFTTdr8sd7DaixGxtMCFv7l1lDW_0,1089
 odoo/addons/sale_product_pack/i18n/ca.po,sha256=TXOG_QwP0Pr1fz3pHdCYzdfQq-_-RWWOrFGf62rUOyo,7103
 odoo/addons/sale_product_pack/i18n/ca_ES.po,sha256=9Ln_uVqq7glSyNHjTJiJbbvzlU_aZw05hIzt-eDPdZw,5365
 odoo/addons/sale_product_pack/i18n/es.po,sha256=TTOxXCG2eUG-SSf0Nd7hzFrfRtu-XSZKoJrSxS7ZI5s,6841
-odoo/addons/sale_product_pack/i18n/es_AR.po,sha256=vOLV9_Xe0NrNHv6AE8B495O79fJxqzAyAB7g9Bg0Sdw,5758
 odoo/addons/sale_product_pack/i18n/fr.po,sha256=WueSfdB5MYrsxF6QjL65UXzu-eQrGfZofOvUk_WR9A8,6876
 odoo/addons/sale_product_pack/i18n/nl.po,sha256=bTqqVud-lgT4U-yqMgVhiiBaxRRUjmQwMHzTqx9MxEE,5717
 odoo/addons/sale_product_pack/i18n/pt.po,sha256=jwkus6akEkIzcYA2Pzk87JTm5PB5CsUeIC9CeYvn1ng,6682
-odoo/addons/sale_product_pack/i18n/sale_product_pack.pot,sha256=WDmhw3df5rI-yE3v8c6YaGGAj03kdkMm7K4pOBG74HM,4278
+odoo/addons/sale_product_pack/i18n/sale_product_pack.pot,sha256=cwzWXezh2oBdx95aBYiuoel_wGqkQTH3VZbMlwqFvyE,4323
 odoo/addons/sale_product_pack/models/__init__.py,sha256=GN-oLlIqH4BlpLoAvl1NuoQbyUxxWocI7F7KmJaVZpk,157
-odoo/addons/sale_product_pack/models/product_pack_line.py,sha256=vua-jbjsMLrlLQAUNaBDeW_Sc8CTKJ3_MJozX_ZrRY8,1814
-odoo/addons/sale_product_pack/models/sale_order.py,sha256=cFpW8i0JAELCFeW3UKoqsKMhSeQ9FQOX8RNNhu117no,2347
-odoo/addons/sale_product_pack/models/sale_order_line.py,sha256=8HHzfEVVKwZbWDQEw7oMkLCplx9ToJFRPM_KX_C6drc,4172
-odoo/addons/sale_product_pack/readme/CONTRIBUTORS.rst,sha256=klxSIyps_nnph_xkcMUHEVF817qXufo0dUg87abgXv0,261
+odoo/addons/sale_product_pack/models/product_pack_line.py,sha256=K_Ag5pLQXIwkag_J_FeGnlCxGMR_DHgpccPh_d-06b0,1761
+odoo/addons/sale_product_pack/models/sale_order.py,sha256=KWFHpyNYjhmQn9lxAGmK7c2f85Z4lLaAR4cIVJ_qO_4,2764
+odoo/addons/sale_product_pack/models/sale_order_line.py,sha256=G3mOa2_yWQd4pkuiRsVarcEKjNHYe6EtuZTjDuEJjGE,4571
+odoo/addons/sale_product_pack/readme/CONTRIBUTORS.rst,sha256=Q52PAObXb-1cSf7MKfurVI1LWLI95li226m6C1jqMm4,319
 odoo/addons/sale_product_pack/readme/DESCRIPTION.rst,sha256=NVUl3RDGYHuMqQ_oJ69oyXvcj7WhwAS8Zef1x8pAa3w,230
 odoo/addons/sale_product_pack/readme/ROADMAP.rst,sha256=XOz5gZ7gql60w6wA75_yN8SPd2f9hkKuXYiO4wHl8bk,300
 odoo/addons/sale_product_pack/readme/USAGE.rst,sha256=lLdJzqBjy8mYRWIn4qn7k0iLP8rN35H9fi_DHQEppdA,708
 odoo/addons/sale_product_pack/security/ir.model.access.csv,sha256=iiREIpRipY_o-Yq91jkGsJFyj4D411lVPu7dkZv7S34,195
 odoo/addons/sale_product_pack/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/sale_product_pack/static/description/index.html,sha256=wN19Nky44BH6E4F8W0P7p28vpGKx7WG0witkBp9UGVw,14275
+odoo/addons/sale_product_pack/static/description/index.html,sha256=5bLy2NgRVcIbhSdWpTrCtOFIwFjd-bb8D-LXi8Bs71o,14390
 odoo/addons/sale_product_pack/tests/__init__.py,sha256=sAaonRCpdMSJOE4cOXjBsMv5Nq4LeB9Sh_MveHtSmks,107
-odoo/addons/sale_product_pack/tests/test_sale_product_pack.py,sha256=gopnkRVNVIFCXYqUuHauEfM3NZDx4dho9e2FhD-u2Oc,9385
+odoo/addons/sale_product_pack/tests/test_sale_product_pack.py,sha256=O31cNXQbh6cSHook4X1Vd2OZ321Ig-gWr10LQy9UDzc,11445
 odoo/addons/sale_product_pack/views/product_pack_line_views.xml,sha256=wpRiawUkyy9VA7fbAkgRdYD8x_uHZ6uXWB9mEgIbgao,2162
-odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/METADATA,sha256=hVcZu7hkRdoUuv8lK2alijs5xzQo7nMT94wc2Zx4Asw,5021
-odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_sale_product_pack-15.0.1.0.0.4.dist-info/RECORD,,
+odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/METADATA,sha256=o9oc5vHaubuHq0dk_JDpfPF6nVwStZqfAdOt3JUYvnI,5080
+odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_sale_product_pack-16.0.1.0.0.5.dist-info/RECORD,,
```

