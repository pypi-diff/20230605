# Comparing `tmp/JoUtil-1.2.1-py3-none-any.whl.zip` & `tmp/JoUtil-1.3.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 10384149 bytes, number of entries: 104
+Zip file size: 10388156 bytes, number of entries: 106
 -rw-rw-rw-  2.0 fat      235 b- defN 20-Sep-22 08:54 JoTools/__init__.py
 -rw-rw-rw-  2.0 fat    40994 b- defN 23-Apr-25 10:44 JoTools/operateDeteRes.py
 -rw-rw-rw-  2.0 fat     9076 b- defN 21-Dec-14 11:48 JoTools/for_csdn/find_same_img/find_same_img.py
 -rw-rw-rw-  2.0 fat     1787 b- defN 21-Jul-21 09:11 JoTools/for_csdn/the_art_of_war/the_art_of_war.py
 -rw-rw-rw-  2.0 fat    22538 b- defN 21-Jul-21 09:11 JoTools/for_csdn/the_art_of_war/data/the_art_of_war.txt
 -rw-rw-rw-  2.0 fat    22837 b- defN 21-Jul-29 01:31 JoTools/for_csdn/the_art_of_war/data/the_art_of_war_line.txt
 -rw-rw-rw-  2.0 fat     1497 b- defN 22-Aug-22 10:30 JoTools/for_csdn/word_pic/ucd_say.py
@@ -28,31 +28,33 @@
 -rw-rw-rw-  2.0 fat     8398 b- defN 21-Jul-21 09:11 JoTools/txkj/imageAugmentation.py
 -rw-rw-rw-  2.0 fat     9410 b- defN 22-Jun-27 02:19 JoTools/txkj/jsonInfo.py
 -rw-rw-rw-  2.0 fat     6552 b- defN 21-Jul-21 09:11 JoTools/txkj/parseXml.py
 -rw-rw-rw-  2.0 fat     7343 b- defN 21-Jul-21 09:11 JoTools/txkj/segmentAndRegroup.py
 -rw-rw-rw-  2.0 fat     6726 b- defN 22-Jun-08 09:39 JoTools/txkj/ucDatasetOpt.py
 -rw-rw-rw-  2.0 fat     5410 b- defN 22-Aug-15 06:00 JoTools/txkj/ucDatasetUtil.py
 -rw-rw-rw-  2.0 fat     7446 b- defN 22-Jun-08 08:46 JoTools/txkj/ucGenerator.py
--rw-rw-rw-  2.0 fat      628 b- defN 23-Apr-01 09:19 JoTools/txkj/xml_to_yolo.py
+-rw-rw-rw-  2.0 fat     1100 b- defN 23-May-11 02:07 JoTools/txkj/xml_to_yolo.py
 -rw-rw-rw-  2.0 fat    11730 b- defN 21-Dec-18 07:07 JoTools/txkjRes/AllRes.py
 -rw-rw-rw-  2.0 fat      353 b- defN 21-Jul-21 09:11 JoTools/txkjRes/__init__.py
 -rw-rw-rw-  2.0 fat      447 b- defN 22-Mar-26 01:28 JoTools/txkjRes/configOpt.py
 -rw-rw-rw-  2.0 fat     5952 b- defN 22-Mar-03 06:08 JoTools/txkjRes/deteAngleObj.py
 -rw-rw-rw-  2.0 fat    13235 b- defN 22-Apr-21 08:44 JoTools/txkjRes/deteObj.py
--rw-rw-rw-  2.0 fat    79275 b- defN 23-Apr-25 08:29 JoTools/txkjRes/deteRes.py
+-rw-rw-rw-  2.0 fat    79724 b- defN 23-May-29 06:17 JoTools/txkjRes/deteRes.py
 -rw-rw-rw-  2.0 fat     7181 b- defN 21-Jul-21 09:11 JoTools/txkjRes/deteSegmentObj.py
 -rw-rw-rw-  2.0 fat    13005 b- defN 23-Feb-25 05:54 JoTools/txkjRes/deteXml.py
 -rw-rw-rw-  2.0 fat      151 b- defN 21-Dec-15 02:21 JoTools/txkjRes/lineRes.py
 -rw-rw-rw-  2.0 fat     2523 b- defN 22-Jan-05 07:36 JoTools/txkjRes/parseJson.py
 -rw-rw-rw-  2.0 fat    10124 b- defN 22-Jan-04 06:12 JoTools/txkjRes/pointRes.py
 -rw-rw-rw-  2.0 fat       99 b- defN 21-Dec-15 01:50 JoTools/txkjRes/pointXml.py
+-rw-rw-rw-  2.0 fat     3075 b- defN 23-Jun-05 11:37 JoTools/txkjRes/postUtil.py
+-rw-rw-rw-  2.0 fat     3286 b- defN 23-Jun-05 11:40 JoTools/txkjRes/receiveUtil.py
 -rw-rw-rw-  2.0 fat     4077 b- defN 22-Jan-07 06:05 JoTools/txkjRes/resBase.py
 -rw-rw-rw-  2.0 fat     6830 b- defN 23-Apr-25 02:18 JoTools/txkjRes/resTools.py
 -rw-rw-rw-  2.0 fat     1976 b- defN 21-Dec-15 02:44 JoTools/txkjRes/segmentObj.py
--rw-rw-rw-  2.0 fat    12761 b- defN 22-Apr-12 06:43 JoTools/txkjRes/segmentRes.py
+-rw-rw-rw-  2.0 fat    13588 b- defN 23-Apr-28 07:45 JoTools/txkjRes/segmentRes.py
 -rw-rw-rw-  2.0 fat      809 b- defN 21-Jul-21 09:11 JoTools/utils/ArgparseUtil.py
 -rw-rw-rw-  2.0 fat      883 b- defN 21-Jul-21 09:11 JoTools/utils/BisectUtil.py
 -rw-rw-rw-  2.0 fat     4063 b- defN 22-Sep-28 06:11 JoTools/utils/BlockUtil.py
 -rw-rw-rw-  2.0 fat     4623 b- defN 21-Dec-09 01:35 JoTools/utils/BytesUtil.py
 -rw-rw-rw-  2.0 fat    10489 b- defN 21-Jul-21 09:11 JoTools/utils/CompileUtil.py
 -rw-rw-rw-  2.0 fat     4112 b- defN 22-Jun-28 10:42 JoTools/utils/CompressFolderUtil.py
 -rw-rw-rw-  2.0 fat      877 b- defN 21-Sep-16 11:06 JoTools/utils/ContextManagerUtil.py
@@ -64,43 +66,43 @@
 -rw-rw-rw-  2.0 fat      587 b- defN 22-Mar-26 02:15 JoTools/utils/ExternalCommandUtil.py
 -rw-rw-rw-  2.0 fat     4227 b- defN 21-Jul-21 09:11 JoTools/utils/FTPUtil.py
 -rw-rw-rw-  2.0 fat    12602 b- defN 23-Mar-30 10:54 JoTools/utils/FileOperationUtil.py
 -rw-rw-rw-  2.0 fat     1014 b- defN 22-Feb-11 07:30 JoTools/utils/FrameCal.py
 -rw-rw-rw-  2.0 fat     3116 b- defN 21-Oct-14 02:26 JoTools/utils/GifUtil.py
 -rw-rw-rw-  2.0 fat     1201 b- defN 21-Jul-22 02:02 JoTools/utils/GitUtil.py
 -rw-rw-rw-  2.0 fat     6041 b- defN 21-Jul-21 09:11 JoTools/utils/HashImageUtil.py
--rw-rw-rw-  2.0 fat     8228 b- defN 22-Dec-06 03:52 JoTools/utils/HashlibUtil.py
+-rw-rw-rw-  2.0 fat     8324 b- defN 23-May-04 10:55 JoTools/utils/HashlibUtil.py
 -rw-rw-rw-  2.0 fat     1474 b- defN 21-Jul-21 09:11 JoTools/utils/ImageMetadataUtil.py
 -rw-rw-rw-  2.0 fat    12328 b- defN 21-Jul-21 09:11 JoTools/utils/ImageProcessingUtil.py
 -rw-rw-rw-  2.0 fat    24558 b- defN 21-Jul-21 09:11 JoTools/utils/ImageUtil.py
 -rw-rw-rw-  2.0 fat     4345 b- defN 22-Mar-16 08:47 JoTools/utils/InterpolateUtil.py
 -rw-rw-rw-  2.0 fat      272 b- defN 21-Jul-21 09:11 JoTools/utils/InterpolationUtil.py
 -rw-rw-rw-  2.0 fat     1158 b- defN 21-Jul-30 02:29 JoTools/utils/JsonUtil.py
 -rw-rw-rw-  2.0 fat     2455 b- defN 22-Dec-26 00:45 JoTools/utils/LivpUtil.py
 -rw-rw-rw-  2.0 fat     1664 b- defN 22-Feb-25 02:47 JoTools/utils/LogUtil.py
 -rw-rw-rw-  2.0 fat     1773 b- defN 21-Jul-21 09:11 JoTools/utils/LyricsUtil.py
 -rw-rw-rw-  2.0 fat      857 b- defN 21-Jul-22 02:15 JoTools/utils/MarkDownUtil.py
 -rw-rw-rw-  2.0 fat     5003 b- defN 21-Jul-21 09:11 JoTools/utils/MySqlUtil.py
 -rw-rw-rw-  2.0 fat      827 b- defN 21-Jul-21 09:11 JoTools/utils/NumberUtil.py
 -rw-rw-rw-  2.0 fat     1606 b- defN 21-Jul-21 09:11 JoTools/utils/OCRUtil.py
--rw-rw-rw-  2.0 fat      664 b- defN 21-Jul-21 09:11 JoTools/utils/PickleUtil.py
+-rw-rw-rw-  2.0 fat     2511 b- defN 23-May-04 08:07 JoTools/utils/PickleUtil.py
 -rw-rw-rw-  2.0 fat     3059 b- defN 22-Feb-10 02:56 JoTools/utils/PlaqueUtil.py
 -rw-rw-rw-  2.0 fat     4590 b- defN 22-Mar-31 06:14 JoTools/utils/PointsUtil.py
 -rw-rw-rw-  2.0 fat     1783 b- defN 22-May-23 06:14 JoTools/utils/PrintUtil.py
 -rw-rw-rw-  2.0 fat     1112 b- defN 21-Jul-21 09:11 JoTools/utils/PropertiesUtil.py
 -rw-rw-rw-  2.0 fat     1470 b- defN 21-Sep-02 02:56 JoTools/utils/RandomUtil.py
 -rw-rw-rw-  2.0 fat     1504 b- defN 22-Jun-07 09:36 JoTools/utils/RedisUtil.py
 -rw-rw-rw-  2.0 fat     2625 b- defN 21-Aug-21 03:59 JoTools/utils/ScrapyUtil.py
 -rw-rw-rw-  2.0 fat     1917 b- defN 21-Jul-21 09:11 JoTools/utils/SplitUtil.py
 -rw-rw-rw-  2.0 fat     2198 b- defN 22-Apr-28 01:58 JoTools/utils/StrUtil.py
 -rw-rw-rw-  2.0 fat     1119 b- defN 23-Apr-24 07:26 JoTools/utils/TimeUtil.py
 -rw-rw-rw-  2.0 fat     1976 b- defN 22-Oct-22 02:20 JoTools/utils/TxtUtil.py
--rw-rw-rw-  2.0 fat     7922 b- defN 21-Dec-09 02:06 JoTools/utils/VideoUtilCV.py
+-rw-rw-rw-  2.0 fat     8044 b- defN 23-May-11 04:00 JoTools/utils/VideoUtilCV.py
 -rw-rw-rw-  2.0 fat     5034 b- defN 22-Feb-23 07:36 JoTools/utils/XmlUtil.py
 -rw-rw-rw-  2.0 fat      405 b- defN 22-Sep-16 03:58 JoTools/utils/YamlUtil.py
 -rw-rw-rw-  2.0 fat     2614 b- defN 21-Jul-21 09:11 JoTools/utils/ZipUtil.py
 -rw-rw-rw-  2.0 fat       52 b- defN 20-Sep-22 11:05 JoTools/utils/__init__.py
--rw-rw-rw-  2.0 fat      679 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/WHEEL
--rw-rw-rw-  2.0 fat      168 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     8907 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/RECORD
-104 files, 19998322 bytes uncompressed, 10370159 bytes compressed:  48.1%
+-rw-rw-rw-  2.0 fat      679 b- defN 23-Jun-05 11:41 JoUtil-1.3.1.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-05 11:41 JoUtil-1.3.1.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat      168 b- defN 23-Jun-05 11:41 JoUtil-1.3.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     9080 b- defN 23-Jun-05 11:42 JoUtil-1.3.1.dist-info/RECORD
+106 files, 20008669 bytes uncompressed, 10373900 bytes compressed:  48.2%
```

## zipnote {}

```diff
@@ -132,14 +132,20 @@
 
 Filename: JoTools/txkjRes/pointRes.py
 Comment: 
 
 Filename: JoTools/txkjRes/pointXml.py
 Comment: 
 
+Filename: JoTools/txkjRes/postUtil.py
+Comment: 
+
+Filename: JoTools/txkjRes/receiveUtil.py
+Comment: 
+
 Filename: JoTools/txkjRes/resBase.py
 Comment: 
 
 Filename: JoTools/txkjRes/resTools.py
 Comment: 
 
 Filename: JoTools/txkjRes/segmentObj.py
@@ -294,20 +300,20 @@
 
 Filename: JoTools/utils/ZipUtil.py
 Comment: 
 
 Filename: JoTools/utils/__init__.py
 Comment: 
 
-Filename: JoUtil-1.2.1.dist-info/METADATA
+Filename: JoUtil-1.3.1.dist-info/METADATA
 Comment: 
 
-Filename: JoUtil-1.2.1.dist-info/WHEEL
+Filename: JoUtil-1.3.1.dist-info/WHEEL
 Comment: 
 
-Filename: JoUtil-1.2.1.dist-info/top_level.txt
+Filename: JoUtil-1.3.1.dist-info/top_level.txt
 Comment: 
 
-Filename: JoUtil-1.2.1.dist-info/RECORD
+Filename: JoUtil-1.3.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## JoTools/txkj/xml_to_yolo.py

```diff
@@ -2,26 +2,39 @@
 # -*- author: jokker -*-
 
 
 import os
 from JoTools.txkjRes.deteRes import DeteRes
 from JoTools.utils.FileOperationUtil import FileOperationUtil
 
-xml_dir = r"C:\Users\14271\Desktop\result_xml"
-res_dir = r"C:\Users\14271\Desktop\txt_dir"
+xml_dir = r"C:\Users\14271\Desktop\xml"
+res_dir = r"C:\Users\14271\Desktop\txt"
+
+tag_list = ["aqm","aqm_error","aqm_miss","error","gz","gzf","gzf_error","gzf_miss","hmj","kz","kz_error","qz","st","st_error","st_miss","xz","xz_error","ydb"]
+tag_map = {}
+for index, each in enumerate(tag_list):
+    tag_map[each] = index
 
 index = 0
 for each_xml_path in FileOperationUtil.re_all_file(xml_dir, endswitch=[".xml"]):
     index += 1
     print(index, each_xml_path)
     dete_res = DeteRes(each_xml_path)
     each_txt_path = os.path.join(res_dir, FileOperationUtil.bang_path(each_xml_path)[1] + ".txt")
-    dete_res.save_to_yolo_txt(each_txt_path)
+    dete_res.save_to_yolo_txt(each_txt_path, tag_map)
+
 
+    # dete_res.do_nms(threshold=0.1, ignore_tag=False)
 
+    # # dete_res.filter_by_conf()
+    # #
+    # dete_res.filter_by_tags(remove_tag=["hmj", "qz", "gz", "ydb"], update=True)
+    #
+    # dete_res.reset_alarms()
+    #
```

## JoTools/txkjRes/deteRes.py

```diff
@@ -383,31 +383,26 @@
                     if each_attr not in ['cx', 'cy', 'w', 'h', 'angle', 'conf', 'id', 'crop_path', 'tag']:
                         each_obj[each_attr] = str(each_dete_obj.__dict__[each_attr])
 
                 json_object.append(JsonUtil.save_data_to_json_str(each_obj))
         json_dict['object'] = JsonUtil.save_data_to_json_str(json_object)
         return json_dict
 
-    def save_to_txt(self, txt_path):
-        """label img 中会将标注信息转为 txt 进行保存"""
-        # todo 会生成两个文件 （1）classes.txt 存放类别信息 （2）文件名.txt 存放标注信息，tag mx my w h , mx my 为中心点坐标
-        pass
-
-    def save_to_yolo_txt(self, txt_path):
+    def save_to_yolo_txt(self, txt_path, tag_dict):
         # 没有结果生成空的 txt
         if not (self.width > 0 and self.height > 0):
             raise ValueError("need self.width and self.height")
 
         with open(txt_path, "w") as txt_file:
             for obj in self._alarms:
                 w_r = (obj.x2 - obj.x1)/self.width
                 h_r = (obj.y2 - obj.y1)/self.height
                 cx = (obj.x1 + (obj.x2 - obj.x1) * 0.5) / self.width
                 cy = (obj.y1 + (obj.y2 - obj.y1) * 0.5) / self.height
-                label = obj.tag
+                label = str(tag_dict[obj.tag])
                 txt_file.write("{0} {1} {2} {3} {4}".format(label, cx, cy, w_r, h_r))
                 txt_file.write("\n")
 
     # @DecoratorUtil.time_this
     def crop_dete_obj(self, save_dir, augment_parameter=None, method=None, exclude_tag_list=None, split_by_tag=False, include_tag_list=None, assign_img_name=None, save_augment=False):
         """将指定的类型的结果进行保存，可以只保存指定的类型，命名使用标准化的名字 fine_name + tag + index, 可指定是否对结果进行重采样，或做特定的转换，只要传入转换函数
         * augment_parameter = [0.5, 0.5, 0.2, 0.2]
@@ -1033,15 +1028,15 @@
     def filter_by_mask(self, mask, cover_index_th=0.5, need_in=True, update=True):
         """使用多边形 mask 进行过滤，mask 支持任意凸多边形，设定覆盖指数, mask 一连串的点连接起来的 [[x1,y1], [x2,y2], [x3,y3]], need_in is True, 保留里面的内容，否则保存外面的"""
         new_dete_res = self.deep_copy(copy_img=False)
         new_dete_res.reset_alarms()
         #
         for each_dete_obj in self._alarms:
             each_cover_index = ResTools.polygon_iou_1(each_dete_obj.get_points(), mask)
-            if each_cover_index > cover_index_th and need_in is True:
+            if each_cover_index >= cover_index_th and need_in is True:
                 new_dete_res.add_obj_2(each_dete_obj)
             elif each_cover_index < cover_index_th and need_in is False:
                 new_dete_res.add_obj_2(each_dete_obj)
 
         if update:
             self._alarms = new_dete_res._alarms
             return self
@@ -1447,15 +1442,15 @@
                 # if each_dete_obj_new.y2 > height:
                 #     each_dete_obj_new.y2 = height
                 #
                 new_alarms.append(each_dete_obj_new)
 
         # 保存 xml
         if save_name is None:
-            loc_str = "[{0}_{1}_{2}_{3}]".format(assign_range[0], assign_range[1], assign_range[2], assign_range[3])
+            loc_str = "[{0},{1},{2},{3},{4},{5},{6}]".format(assign_range[0], assign_range[1], assign_range[2], assign_range[3], "bbox", -1, -1)
             save_name = os.path.split(self.xml_path)[1].strip('.xml')+ '-+-' + loc_str
 
         xml_save_dir = os.path.join(save_dir, 'Annotations')
         img_save_dir = os.path.join(save_dir, 'JPEGImages')
         xml_save_path = os.path.join(xml_save_dir, save_name + '.xml')
         jpg_save_path = os.path.join(img_save_dir, save_name + '.jpg')
         os.makedirs(xml_save_dir, exist_ok=True)
@@ -1519,14 +1514,38 @@
                 if func(obj1,obj2) == True:
                     obj1.tag = 'deleteObj'
                     obj2.tag = 'deleteObj'
                     obj3 = ResTools.fuse_objs(obj1,obj2,tag3)
                     self.add_obj_2(obj3)
         self.filter_by_tags(remove_tag = ['deleteObj'])
 
+    def get_bounding_box(self):
+        """获取外接矩形"""
+        x1, y1 = max(self.width, 10000000000000000000), max(self.height, 10000000000000000000)
+        x2, y2 = -1, -1
+
+        if len(self._alarms) == 0:
+            raise ValueError("* need at leat one dete_obj")
+
+        for obj in self._alarms:
+            if x1 >= obj.x1:
+                x1 = obj.x1
+
+            if y1 >= obj.y1:
+                y1 = obj.y1
+
+            if x2 <= obj.x2:
+                x2 = obj.x2
+
+            if y2 <= obj.y2:
+                y2 = obj.y2
+
+        dete_obj = DeteObj(x1=x1, y1=y1, x2=x2, y2=y2, tag="bounding_box", conf=1)
+        return dete_obj
+
     def filter_tag1_by_tag2_with_nms(self,tag1,tag2,threshold=0.5):
         tag1_list = self.filter_by_tags(remove_tag = tag1)
         tag2_list = self.filter_by_tags(remove_tag = tag2)
         del_list = []
         for i,tag1 in enumerate(tag1_list):
             for tag2 in tag2_list:
                 if ResTools.cal_iou(tag1,tag2,True) > threshold:
```

## JoTools/txkjRes/segmentRes.py

```diff
@@ -7,14 +7,15 @@
 from labelme import utils
 from ..utils.JsonUtil import JsonUtil
 from ..utils.FileOperationUtil import FileOperationUtil
 from .segmentObj import SegmentObj
 import numpy as np
 from skimage.measure import find_contours
 from PIL import Image
+import random
 
 # todo 指定输出 mask 的格式，如何将每个 mask obj 对应到 label 上去, 因为寻找外轮廓的时候 是从值小点的到值大的这么个顺序找的，所以只要记录下
 # todo mask 试一下不要写为 bool 类型的，而是写为 int 类型的，最多 255 对象，每个对象一个值，这样说不定找边缘的时候就能分开了
 
 # todo 好像对象过多的时候 labelme 上无法展示，看看到底是什么原因
 
 
@@ -248,14 +249,41 @@
 
         if os.path.exists(self.img_path) and (not self.img):
             self.img = Image.open(self.img_path)
 
         if not self.img:
             raise ValueError("self.img_path self.img self.img_data all empty")
 
+    def draw_segment_res(self, save_path):
+
+        mask = self.mask
+
+        print(mask.shape)
+        print(self.image_data.shape)
+
+        overlay = self.image_data
+        overlay[mask>0, :] = [random.randint(1, 255), random.randint(1, 255), random.randint(1, 255)]
+
+        # print(overlay.shape)
+
+        # self.image_data = cv2.addWeighted(self.image_data, 1, overlay, 0.5, 0)
+
+        # mask = mask.astype(np.int)
+        # mask = mask * 255
+        # mask = mask.astype(np.uint8)
+        #
+        #
+        # # 找到轮廓
+        # contours, _ = cv2.findContours(mask, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
+        #
+        # # 画出轮廓
+        # cv2.drawContours(self.image_data, contours, -1, (0, 0, 255), 1)
+        #
+        cv2.imwrite(save_path, overlay)
+
 
 class SegmentOpt():
 
     @staticmethod
     def count_tag(json_dir):
         count = {}
         json_path_list = list(FileOperationUtil.re_all_file(json_dir, endswitch=['.json']))
```

## JoTools/utils/HashlibUtil.py

```diff
@@ -33,15 +33,17 @@
         with open(file_path, 'rb') as xml_file:
             md5.update(xml_file.read())
             return md5.hexdigest()
 
     @staticmethod
     def get_str_md5(assign_str):
         md5 = hashlib.md5()
-        md5.update(assign_str.encode('utf-8'))
+        # md5.update(assign_str.encode('utf-8'))
+        # 不要在里面 encode 有些数据类型会报错
+        md5.update(assign_str)
         return md5.hexdigest()
 
     @staticmethod
     def is_the_same_file(file_path_1, file_path_2):
         """判断两个文件是否是一个文件"""
         md5_1 = HashLibUtil.get_file_md5(file_path_1)
         md5_2 = HashLibUtil.get_file_md5(file_path_2)
```

## JoTools/utils/PickleUtil.py

```diff
@@ -1,28 +1,90 @@
 # -*- coding: utf-8  -*-
 # -*- author: jokker -*-
 
 import pickle
+import uuid
+import os
+import base64
+from tempfile import NamedTemporaryFile
+import hashlib
+
+try:
+    from cryptography.fernet import Fernet
+except ImportError:
+    print('\x1b[1;31m' + 'import cryptography error : PickleUtil' + '\033[0m')
 
 
 class PickleUtil(object):
 
     @staticmethod
     def load_data_from_pickle_file(pickle_file_path):
         with open(pickle_file_path, 'rb') as pickle_file:
             return pickle.load(pickle_file)
 
     @staticmethod
     def save_data_to_pickle_file(data, pickle_file_path):
         with open(pickle_file_path, 'wb') as pickle_file:
             pickle.dump(data, pickle_file)
 
+    @staticmethod
+    def _get_key(key_str):
+        key = key_str.encode()
+        return base64.urlsafe_b64encode(hashlib.sha256(key).digest())
+
+    @staticmethod
+    def encrypt_pickle(pkl_path, save_path, assign_key='jokker'):
+
+        assign_key = PickleUtil._get_key(assign_key)
+        cipher = Fernet(assign_key)
+
+        # 加密 pickle 文件
+        with open(pkl_path, 'rb') as f:
+            encrypted_data = cipher.encrypt(f.read())
+
+        # 保存加密的文件
+        with open(save_path, 'wb') as f:
+            f.write(encrypted_data)
+        return assign_key
+
+    @staticmethod
+    def decrypt_pickle(pkl_path, assign_key='jokker'):
+        assign_key = PickleUtil._get_key(assign_key)
+        cipher = Fernet(assign_key)
+
+        # 解密加密的 pickle 文件
+        try:
+            with open(pkl_path, 'rb') as f:
+                decrypted_data = cipher.decrypt(f.read())
+        except Exception as e:
+            print('\x1b[1;31m' + 'InvalidToken, 密码错误' + '\033[0m')
+            return None
+
+        # 使用临时文件存贮中间文件
+        with NamedTemporaryFile(mode='w+b') as f:
+            f.write(decrypted_data)
+            f.seek(0)
+            data = pickle.load(f)
+
+        return data
+
 
 if __name__ == '__main__':
 
-    a = [1, 2, 3, 4, 5, 6]
+    from JoTools.txkjRes.deteRes import DeteRes
+
+    a = DeteRes(r"C:\Users\14271\Desktop\del\gt_xml\005305_jpg.rf.4bfbcf630358ee01c2a6a2c1da620f63.xml")
+
+    a.print_as_fzc_format()
+
+    pickle_path = r'C:\Users\14271\Desktop\a.pkl'
+
+    PickleUtil.save_data_to_pickle_file(a, pickle_path)
+
+    PickleUtil.encrypt_pickle(pickle_path, pickle_path, "default_key")
+
+    res = PickleUtil.decrypt_pickle(pickle_path, "default_key")
+
+    res.print_as_fzc_format()
 
-    b = [1, '2', a]
 
-    PickleUtil.save_data_to_pickle_file(b, 'a.pkl')
 
-    print(PickleUtil.load_data_from_pickle_file('a.pkl'))
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## JoTools/utils/VideoUtilCV.py

```diff
@@ -41,18 +41,20 @@
             vc.set(cv2.CAP_PROP_POS_FRAMES, i)
             img = vc.read()
 
             if not img[0]:
                 break
 
             try:
-                each_save_path = os.path.join(save_dir, '{0}_{1}.jpg'.format(vedio_name, str(index).rjust(3, '0')))
+                each_save_path = os.path.join(save_dir, '{0}_{1}.jpg'.format(vedio_name, str(index).rjust(8, '0')))
                 if StrUtil.contain_zh(each_save_path):
                     raise ValueError("save path contain chinese : {0}".format(each_save_path))
                 cv2.imwrite(each_save_path, img[1])  # 将数据写到本地
+                # 或者直接保存到临时文件中去就行
+                yield each_save_path
             except Exception as e:
                 print("error : {0} {1}".format(e, img))
 
     @staticmethod
     def write_vedio(img_path_list, out_path, assign_fps=20, assign_size=None):
         """图像拼接为视频"""
         fourcc = VideoWriter_fourcc(*"MJPG")  #支持jpg
@@ -170,18 +172,18 @@
     #         os.makedirs(save_folder)
     #
     #     VideoUtilCV.get_img_from_vedio(each_vedio_path, save_folder, sep=1, start_index=0)
 
 
     out_path = r"C:\Users\14271\Desktop\test_vedio_all_005.avi"
     img_folder = r"C:\Users\14271\Desktop\all_005"
-    # a.write_vedio(FileOperationUtil.re_all_file(save_folder), out_path, assign_fps=5, assign_size=(640, 480))
-
-    file_list = FileOperationUtil.re_all_file(img_folder)
-
-    # file_list = file_list[::-1]
-
-    VideoUtilCV.write_vedio(file_list, out_path, assign_fps=15)
+    a.write_vedio(FileOperationUtil.re_all_file(save_folder), out_path, assign_fps=5, assign_size=(640, 480))
 
+    # file_list = FileOperationUtil.re_all_file(img_folder)
+    #
+    # # file_list = file_list[::-1]
+    #
+    # VideoUtilCV.write_vedio(file_list, out_path, assign_fps=15)
+    #
```

## Comparing `JoUtil-1.2.1.dist-info/METADATA` & `JoUtil-1.3.1.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: JoUtil
-Version: 1.2.1
+Version: 1.3.1
 Summary: a tools for TXKJ algo
 Home-page: https://github.com/newjokker/JoUtil.git
 Author: jokker
 Author-email: 18761609908@163.com
 License: UNKNOWN
 Platform: UNKNOWN
 Requires: numpy
```

## Comparing `JoUtil-1.2.1.dist-info/RECORD` & `JoUtil-1.3.1.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -27,31 +27,33 @@
 JoTools/txkj/imageAugmentation.py,sha256=6KqAcZsn179cQpRZzNSNd9JVtCtcJ4HuoP7udX96Rek,8398
 JoTools/txkj/jsonInfo.py,sha256=s5iPeLP1PO79yn8eYG-Vuu5GNtmi3nZ9jyz0x0OVrwA,9410
 JoTools/txkj/parseXml.py,sha256=3bM2ha7xiYIg9VUFiZedRgmWHkqUgbPYJ6MJ3vPgV8c,6552
 JoTools/txkj/segmentAndRegroup.py,sha256=sgTwahX6QYKDA6djFON6cJ1KnRGyQXjJ01LWKu9ikSQ,7343
 JoTools/txkj/ucDatasetOpt.py,sha256=a7uALEJq_4J5SCwzBoq35IMGoZPiBAwqUVzf-iLrGiI,6726
 JoTools/txkj/ucDatasetUtil.py,sha256=KpavTCe65Hk-L2_7hOhOrUK4VLy4FG8Lyge8-8IIR1Q,5410
 JoTools/txkj/ucGenerator.py,sha256=z48VwL324fS8DDoH4wAyC0ytvGIfsUyA76jox-2GcW8,7446
-JoTools/txkj/xml_to_yolo.py,sha256=prr_5awLD3TbWoBHBNrKd0s5vq6xEBBTAthJQ4njoIk,628
+JoTools/txkj/xml_to_yolo.py,sha256=XKBOq-Xp3-qyAzkQLkR8k5BDpjIfxIE0cgjSUxV0dPE,1100
 JoTools/txkjRes/AllRes.py,sha256=9qFf8LHid6pavNAVCQA8pFXl5nRzR7Z6ZfBVlxIHjZU,11730
 JoTools/txkjRes/__init__.py,sha256=2-X8FrfpKCxKhIKegBOvJcDBD4vAC_N3kXfRK14Ohyo,353
 JoTools/txkjRes/configOpt.py,sha256=RcCj1bxiUJytYl-gtavXcaQ9qIDhIf-2-RAaUw-a5KQ,447
 JoTools/txkjRes/deteAngleObj.py,sha256=frGmwpTnaP-9PXcs1uGm33fKLOPVz5LUiceMhuKRKw8,5952
 JoTools/txkjRes/deteObj.py,sha256=c4ePOIoV6sHARqhF07e4_YyouW3U8l9NDNoNwVioMrQ,13235
-JoTools/txkjRes/deteRes.py,sha256=Q6SBqze-oGN5ovpsn_4dR3eAo8E2pIqNZmRtkD05Jvs,79275
+JoTools/txkjRes/deteRes.py,sha256=F7l4LFmSAC5rS6t5Wz_7S7wp5X8y96ampw_bIPE9jnE,79724
 JoTools/txkjRes/deteSegmentObj.py,sha256=rbfbyRUb7ZGLf7iQSZqKCGamiAeAZ3WjOEI46KxN7fg,7181
 JoTools/txkjRes/deteXml.py,sha256=_4q2C41LgIQEr9DW-d5rTjAVuXAC-QH0ObutdwpPjrY,13005
 JoTools/txkjRes/lineRes.py,sha256=1vNEH6X6AnIxIMoaPqlez20JMzPkZz39spmNcwND3kE,151
 JoTools/txkjRes/parseJson.py,sha256=YMHmBFUSj6kP0Q6cI-z2_Wiv9q9IgN6xoPcmPn38I5k,2523
 JoTools/txkjRes/pointRes.py,sha256=88e6WHGIyVDIxFnsnimfuJPVO9lvjwZYCk-hBaHbGpA,10124
 JoTools/txkjRes/pointXml.py,sha256=TWpiYZC1u1zqD6eYWZhAmoHeIj1c95Fp_Tw-kXWtluc,99
+JoTools/txkjRes/postUtil.py,sha256=-zJnIVgy9qAV91Gj_X0fgqkQpQY2eAG1SnnQjwrIJNI,3075
+JoTools/txkjRes/receiveUtil.py,sha256=GeoFmQSZWgVZKIjjPaY5ID00pP_9Y17zUImFxTr-tt0,3286
 JoTools/txkjRes/resBase.py,sha256=EWYRwVkyeN-FJxDyUsGqZDoB0ORiIV8Exi2k0Dr8fXU,4077
 JoTools/txkjRes/resTools.py,sha256=eIfpuLqpILDzB5xkzOE7QO7zUEd1ppN3GqKILW4eCuM,6830
 JoTools/txkjRes/segmentObj.py,sha256=194jA8KVnyKur8c-Xi1fhZITBA6V9nsdOVIr6wnFQT8,1976
-JoTools/txkjRes/segmentRes.py,sha256=NNQv3xWOCkRSPn9Iqs2OQEVRJJ5Go0nzGgy4DKHTz_k,12761
+JoTools/txkjRes/segmentRes.py,sha256=Lvp1TP6UsJBq_uJpTX4Y0Zt163v9c0NURDXnwSStMFA,13588
 JoTools/utils/ArgparseUtil.py,sha256=BSUuedC4hfMfoO4F2v4gMtg9eXZBsi1rEJcGQUCE_VU,809
 JoTools/utils/BisectUtil.py,sha256=6u9-Fw8VaJI78SLZJkbP4OpcFuJU-JLFQaOwFuoNROE,883
 JoTools/utils/BlockUtil.py,sha256=frJMANWWreRfQJX4nR-FcxhhRNWjrFwF_-dTc3H_zU8,4063
 JoTools/utils/BytesUtil.py,sha256=yp3Otsnc-5LIyjQSJnMZLGX40FpmMkntpPeMMkrcvso,4623
 JoTools/utils/CompileUtil.py,sha256=Fk48lcVDqww01Vf05nErek4h7rU81GStS2cvT6uJ7Fw,10489
 JoTools/utils/CompressFolderUtil.py,sha256=d0sjd5x66lBOXqF4-sc7As0Tv3x0wj-1salutlhbJFI,4112
 JoTools/utils/ContextManagerUtil.py,sha256=fmInkNpIXsba35FItbzOo9dFYOq5JqzPz1yfPAlyqSY,877
@@ -63,42 +65,42 @@
 JoTools/utils/ExternalCommandUtil.py,sha256=5Vody6gpAQPP0eIlsBvqVOHd3YV2yKrWaiX7dPBasMs,587
 JoTools/utils/FTPUtil.py,sha256=1HCw_hLpvIsbz7kXn05ij9kGKhfcL6RESxZejevIdao,4227
 JoTools/utils/FileOperationUtil.py,sha256=qd6n2N9uPa5J37kf3eyVjDpsrpciMCwlUYatcDJfVEk,12602
 JoTools/utils/FrameCal.py,sha256=u3_1AwS9xYnFlvoa-YfproyOqBf1WdORtlXNLZJ5unU,1014
 JoTools/utils/GifUtil.py,sha256=LS2M_M3zZBzt4trN3hHLuXLbU7kJrW6etjDKljf6lAA,3116
 JoTools/utils/GitUtil.py,sha256=c3ZF0P5XZyIS3LqayznDdtSdJehRbMd1joLZnAjnXq4,1201
 JoTools/utils/HashImageUtil.py,sha256=5FSWW7DDNyoKmpk-uqTdClFNr6ztuHzvIqLS4jCXkdU,6041
-JoTools/utils/HashlibUtil.py,sha256=DT8zHrYPadHz7uwAPUzDmwBThPdfo_T8LQfHH05VbcY,8228
+JoTools/utils/HashlibUtil.py,sha256=K5E6kR_5SrDCl5MbXMa4wlTuEv4qwQRH6CZh7mye9GI,8324
 JoTools/utils/ImageMetadataUtil.py,sha256=A04Z6_t8vpNrJQONLctz8k48VuMbM30azs8v3ZymErw,1474
 JoTools/utils/ImageProcessingUtil.py,sha256=ow5OOHnZzfgqu3DJboRdtf_k6Wa_pspjTxPNrDqWirE,12328
 JoTools/utils/ImageUtil.py,sha256=RIreN9tl1_ImVrKw6V3vFFOgqxowelzGh1uAUP4F5uQ,24558
 JoTools/utils/InterpolateUtil.py,sha256=oI-qIr_xChHyHxVQXILHiKcDEy__8x-pyKbNEzhn88g,4345
 JoTools/utils/InterpolationUtil.py,sha256=QDsjib2ZEl6ZJH8OSdM6augS8TareilUNufKqS4E-sU,272
 JoTools/utils/JsonUtil.py,sha256=WL8fzI838NsDX3reVswCJ8ecmJcdyqtS31xSfevm5IU,1158
 JoTools/utils/LivpUtil.py,sha256=LcS9f_p7Ygog1uiVEtufnYRU9TXb1ap-atBITPg4aN8,2455
 JoTools/utils/LogUtil.py,sha256=aAgS4CIyYso3PmdIahV4UnzXosRSnCGEDBDkTckAyrw,1664
 JoTools/utils/LyricsUtil.py,sha256=_fhZ8QiqVVl8xWdMOHP9_Kx4V5JYu12L0ELsuPJrmLE,1773
 JoTools/utils/MarkDownUtil.py,sha256=1-GBH9bB8KxBbCH-etw0MeL9FKrDyJRF6g4cUGqxhc4,857
 JoTools/utils/MySqlUtil.py,sha256=vmxCh4XE3kBMeCDSVyjCuL6mRId7-0zPdUXiMTagh_U,5003
 JoTools/utils/NumberUtil.py,sha256=EQiC9W69qLBijHk9VuKkXeZCQkMZv6EYE2zEE8MgZYw,827
 JoTools/utils/OCRUtil.py,sha256=8_uqyCImWieBWC4gzHduPw84C612ZzWKp-s4mvkug3U,1606
-JoTools/utils/PickleUtil.py,sha256=PyQPwyrbrE3fbW5BEWYrCtDIDsHEvyxd8mI4ky9yi_E,664
+JoTools/utils/PickleUtil.py,sha256=4MXHwMg_WiyrVbojC0lMUajqOxHllUB5jaGYtqLGsV0,2511
 JoTools/utils/PlaqueUtil.py,sha256=gieXhEtDoQKh0wQS9Gvc0J_u3lpMPqVBXQUQFi3n5YE,3059
 JoTools/utils/PointsUtil.py,sha256=VSZTvMHhZb5kQKZkMJKy4Yjzrz7ut1fWa_ibSR0Y5qM,4590
 JoTools/utils/PrintUtil.py,sha256=eBXdAfkTvrvvqDHrIWolkFVQhreJ2RSC_40rL50LcIg,1783
 JoTools/utils/PropertiesUtil.py,sha256=TVrezSN4RgSPkVxSAsjwJnuxlHvG07y_-UkXUEdkcT4,1112
 JoTools/utils/RandomUtil.py,sha256=s3N3NHus3bJZDQbbu1AtfH-jurW4dCoKZWImIRxqOf0,1470
 JoTools/utils/RedisUtil.py,sha256=0mtpEnpULX_Wz5Zj7ql6ZUdaHFlvcpQLIkcId3N2dpQ,1504
 JoTools/utils/ScrapyUtil.py,sha256=yk2KnKmwEhvHDEPXKQ2JVNbdVTBMdIbBVL6_rjZo2jE,2625
 JoTools/utils/SplitUtil.py,sha256=eawPO7jLUMG0q--oNag_HBX-KwCBBJKrZREm_z03yZA,1917
 JoTools/utils/StrUtil.py,sha256=RFFLWism-u_zmmFd4i0Vg-yBAOzFICY6QtgInj13AQo,2198
 JoTools/utils/TimeUtil.py,sha256=ddE2psXuBQnDUgRw-huUN8tIY72xtQb_oDf0siZiLMs,1119
 JoTools/utils/TxtUtil.py,sha256=EKTG0BAPskgRTvtxuanXrEcCgsl5IhXJsdINsCi9j0Y,1976
-JoTools/utils/VideoUtilCV.py,sha256=NeqoKLJF9Jn1zMuod2LyqCrC9tNR2c9qD_BBUGOMzgk,7922
+JoTools/utils/VideoUtilCV.py,sha256=OnUMz46mHc1b33e2EC5uU1R65kdPQfF8q2cy0g-2AJM,8044
 JoTools/utils/XmlUtil.py,sha256=Cef9RHgdjhjh374InXb8IjxDpPiAjL2zKESgZKKfSmU,5034
 JoTools/utils/YamlUtil.py,sha256=FS4b3rPAqs303kRt5dK1EeWEip2Zg0RzriGsYJXhHlg,405
 JoTools/utils/ZipUtil.py,sha256=jJUIYu-xfLlVaqefyKLuiGqlM0gl4odA_CfYtMd843o,2614
 JoTools/utils/__init__.py,sha256=83-0sT2JweSlm809BHNBvV-RogYuV3Qw_YwjwlgIOHQ,52
-JoUtil-1.2.1.dist-info/METADATA,sha256=Q6FbuslQeOHVIhq5XA3HiPoHDf4XlRpP0vXqPVCcE-U,679
-JoUtil-1.2.1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-JoUtil-1.2.1.dist-info/top_level.txt,sha256=FAVoqmuyobk4Me6xE5VlG0YVE5Cw4IfI62vAotZ3mKw,168
-JoUtil-1.2.1.dist-info/RECORD,,
+JoUtil-1.3.1.dist-info/METADATA,sha256=Z8fzqLytbNMTYm6LRakKyvz4gUf9E037Ya0-LLiZaxM,679
+JoUtil-1.3.1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+JoUtil-1.3.1.dist-info/top_level.txt,sha256=FAVoqmuyobk4Me6xE5VlG0YVE5Cw4IfI62vAotZ3mKw,168
+JoUtil-1.3.1.dist-info/RECORD,,
```

