# Comparing `tmp/tno.mpc.encryption_schemes.utils-0.7.5-py3-none-any.whl.zip` & `tmp/tno.mpc.encryption_schemes.utils-0.8.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,18 @@
-Zip file size: 23894 bytes, number of entries: 16
--rw-r--r--  2.0 unx     3459 b- defN 21-Nov-30 09:00 tno.mpc.encryption_schemes.utils-0.7.5-py3.8-nspkg.pth
--rw-r--r--  2.0 unx     1395 b- defN 21-Nov-29 16:26 tno/mpc/encryption_schemes/utils/__init__.py
--rw-r--r--  2.0 unx     1860 b- defN 21-Nov-29 16:26 tno/mpc/encryption_schemes/utils/_check_gmpy2.py
--rw-r--r--  2.0 unx    29377 b- defN 21-Nov-29 15:14 tno/mpc/encryption_schemes/utils/fixed_point.py
+Zip file size: 24185 bytes, number of entries: 16
+-rw-r--r--  2.0 unx     3459 b- defN 21-Dec-24 09:03 tno.mpc.encryption_schemes.utils-0.8.0-py3.8-nspkg.pth
+-rw-r--r--  2.0 unx     1435 b- defN 21-Dec-24 09:02 tno/mpc/encryption_schemes/utils/__init__.py
+-rw-r--r--  2.0 unx     1985 b- defN 21-Dec-24 09:02 tno/mpc/encryption_schemes/utils/_check_gmpy2.py
+-rw-r--r--  2.0 unx    29377 b- defN 21-Nov-30 09:00 tno/mpc/encryption_schemes/utils/fixed_point.py
 -rw-r--r--  2.0 unx        0 b- defN 21-Apr-08 10:09 tno/mpc/encryption_schemes/utils/py.typed
--rw-r--r--  2.0 unx     2973 b- defN 21-Nov-29 15:14 tno/mpc/encryption_schemes/utils/utils.py
+-rw-r--r--  2.0 unx     3292 b- defN 21-Dec-24 09:02 tno/mpc/encryption_schemes/utils/utils.py
 -rw-r--r--  2.0 unx        0 b- defN 21-Nov-11 10:05 tno/mpc/encryption_schemes/utils/test/__init__.py
 -rw-r--r--  2.0 unx    11103 b- defN 21-Nov-11 10:05 tno/mpc/encryption_schemes/utils/test/fixed_point_test_parameters.py
 -rw-r--r--  2.0 unx    15929 b- defN 21-Nov-11 10:05 tno/mpc/encryption_schemes/utils/test/test_fixed_point.py
--rw-r--r--  2.0 unx     7277 b- defN 21-Nov-29 15:14 tno/mpc/encryption_schemes/utils/test/test_utils.py
--rw-r--r--  2.0 unx    11396 b- defN 21-Nov-30 09:00 tno.mpc.encryption_schemes.utils-0.7.5.dist-info/LICENSE
--rw-r--r--  2.0 unx     2904 b- defN 21-Nov-30 09:00 tno.mpc.encryption_schemes.utils-0.7.5.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 21-Nov-30 09:00 tno.mpc.encryption_schemes.utils-0.7.5.dist-info/WHEEL
--rw-r--r--  2.0 unx       39 b- defN 21-Nov-30 09:00 tno.mpc.encryption_schemes.utils-0.7.5.dist-info/namespace_packages.txt
--rw-r--r--  2.0 unx        4 b- defN 21-Nov-30 09:00 tno.mpc.encryption_schemes.utils-0.7.5.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1704 b- defN 21-Nov-30 09:00 tno.mpc.encryption_schemes.utils-0.7.5.dist-info/RECORD
-16 files, 89512 bytes uncompressed, 20946 bytes compressed:  76.6%
+-rw-r--r--  2.0 unx     7914 b- defN 21-Dec-24 09:02 tno/mpc/encryption_schemes/utils/test/test_utils.py
+-rw-r--r--  2.0 unx    11396 b- defN 21-Dec-24 09:03 tno.mpc.encryption_schemes.utils-0.8.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2904 b- defN 21-Dec-24 09:03 tno.mpc.encryption_schemes.utils-0.8.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 21-Dec-24 09:03 tno.mpc.encryption_schemes.utils-0.8.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       39 b- defN 21-Dec-24 09:03 tno.mpc.encryption_schemes.utils-0.8.0.dist-info/namespace_packages.txt
+-rw-r--r--  2.0 unx        4 b- defN 21-Dec-24 09:03 tno.mpc.encryption_schemes.utils-0.8.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1704 b- defN 21-Dec-24 09:03 tno.mpc.encryption_schemes.utils-0.8.0.dist-info/RECORD
+16 files, 90633 bytes uncompressed, 21237 bytes compressed:  76.6%
```

## zipnote {}

```diff
@@ -1,8 +1,8 @@
-Filename: tno.mpc.encryption_schemes.utils-0.7.5-py3.8-nspkg.pth
+Filename: tno.mpc.encryption_schemes.utils-0.8.0-py3.8-nspkg.pth
 Comment: 
 
 Filename: tno/mpc/encryption_schemes/utils/__init__.py
 Comment: 
 
 Filename: tno/mpc/encryption_schemes/utils/_check_gmpy2.py
 Comment: 
@@ -24,26 +24,26 @@
 
 Filename: tno/mpc/encryption_schemes/utils/test/test_fixed_point.py
 Comment: 
 
 Filename: tno/mpc/encryption_schemes/utils/test/test_utils.py
 Comment: 
 
-Filename: tno.mpc.encryption_schemes.utils-0.7.5.dist-info/LICENSE
+Filename: tno.mpc.encryption_schemes.utils-0.8.0.dist-info/LICENSE
 Comment: 
 
-Filename: tno.mpc.encryption_schemes.utils-0.7.5.dist-info/METADATA
+Filename: tno.mpc.encryption_schemes.utils-0.8.0.dist-info/METADATA
 Comment: 
 
-Filename: tno.mpc.encryption_schemes.utils-0.7.5.dist-info/WHEEL
+Filename: tno.mpc.encryption_schemes.utils-0.8.0.dist-info/WHEEL
 Comment: 
 
-Filename: tno.mpc.encryption_schemes.utils-0.7.5.dist-info/namespace_packages.txt
+Filename: tno.mpc.encryption_schemes.utils-0.8.0.dist-info/namespace_packages.txt
 Comment: 
 
-Filename: tno.mpc.encryption_schemes.utils-0.7.5.dist-info/top_level.txt
+Filename: tno.mpc.encryption_schemes.utils-0.8.0.dist-info/top_level.txt
 Comment: 
 
-Filename: tno.mpc.encryption_schemes.utils-0.7.5.dist-info/RECORD
+Filename: tno.mpc.encryption_schemes.utils-0.8.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## tno/mpc/encryption_schemes/utils/__init__.py

```diff
@@ -7,14 +7,15 @@
 # https://mypy.readthedocs.io/en/stable/command_line.html#cmdoption-mypy-no-implicit-reexport
 import sys
 import warnings
 from typing import Optional, TextIO, Type, Union
 
 from ._check_gmpy2 import USE_GMPY2 as USE_GMPY2
 from .fixed_point import FixedPoint as FixedPoint
+from .utils import is_prime as is_prime
 from .utils import lcm as lcm
 from .utils import mod_inv as mod_inv
 from .utils import pow_mod as pow_mod
 from .utils import randprime as randprime
 
 
 def custom_showwarning(  # pylint: disable=useless-type-doc
@@ -34,8 +35,8 @@
     :param file: Optional location to write the warning to. If None we write to stderr.
     """
     print(f"{category.__name__}: {message}", file=file if file else sys.stderr)
 
 
 warnings.showwarning = custom_showwarning  # type: ignore[assignment]
 
-__version__ = "0.7.5"
+__version__ = "0.8.0"
```

## tno/mpc/encryption_schemes/utils/_check_gmpy2.py

```diff
@@ -16,14 +16,18 @@
 try:
     from importlib.metadata import PackageNotFoundError, requires, version
 except ImportError:
     from importlib_metadata import PackageNotFoundError, requires, version  # type: ignore[misc]
 
 from packaging.specifiers import SpecifierSet
 
+SPECIFIER_OPERATOR = "===|==|!=|~=|<=|>=|<|>"
+SPECIFIER_REGEX = f"(?:{SPECIFIER_OPERATOR})\s*[\w\.\*]*"
+SPECIFIER_SET_REGEX = f"(?:{SPECIFIER_REGEX})(?:[\s,]*{SPECIFIER_REGEX})*"
+
 # Import gmpy2 to improve efficiency (for larger integers), if available.
 gmpy2_version: Optional[
     Union[packaging.version.Version, packaging.version.LegacyVersion]
 ] = None
 try:
     gmpy2_version = packaging.version.parse(version("gmpy2"))
 except PackageNotFoundError:
@@ -32,22 +36,21 @@
         "achieved by installing the GMPY2 library: "
         "'python -m pip install 'tno.mpc.encryption_schemes.utils[gmpy]'",
     )
 
 USE_GMPY2 = False
 if gmpy2_version is not None:
     deps = ";".join(requires(".".join(__name__.split(".")[:-1])))  # type: ignore[arg-type]
-    gmpy2_spec_pattern_1 = re.compile("gmpy2([^;]*)")
-    gmpy2_spec_pattern_2 = re.compile("gmpy2 \(([^;]*)\)")
-    gmpy2_spec_match = gmpy2_spec_pattern_2.search(deps) or gmpy2_spec_pattern_1.search(
-        deps
+    gmpy2_spec_pattern = re.compile(
+        f"gmpy2[^=~!<>]*?(?P<specs>({SPECIFIER_SET_REGEX}))"
     )
+    gmpy2_spec_match = gmpy2_spec_pattern.search(deps)
     if gmpy2_spec_match is None:
         raise ValueError(f"Failed to extract optional gmpy2 version specifiers.")
-    gmpy2_spec = SpecifierSet(gmpy2_spec_match.group(1))
+    gmpy2_spec = SpecifierSet(gmpy2_spec_match.group("specs"))
     if gmpy2_version in gmpy2_spec:
         USE_GMPY2 = True
     else:
         warnings.warn(
-            f"Efficiency gain is supported for gmpy2{gmpy2_spec}. Detected gmpy2 version"
+            f"Efficiency gain is supported for gmpy2{gmpy2_spec}. Detected gmpy2 version "
             f"{gmpy2_version}. Fallback to non-gmpy2 support."
         )
```

## tno/mpc/encryption_schemes/utils/utils.py

```diff
@@ -93,7 +93,20 @@
     :param num_b: Second number b.
     :return: Least common multiple of a and b.
     """
     if USE_GMPY2:
         return gmpy2.lcm(num_a, num_b)
     # else
     return num_a * num_b // gcd(num_a, num_b)
+
+
+def is_prime(number: int) -> bool:
+    """
+    Check if the input number is a prime number. Uses GMPY2 if available
+
+    :param number: The number to check
+    :return: Whether the input is prime or not
+    """
+    if USE_GMPY2:
+        return gmpy2.mpz(number).is_prime()
+    # else
+    return sympy.isprime(number)
```

## tno/mpc/encryption_schemes/utils/test/test_utils.py

```diff
@@ -9,14 +9,15 @@
 
 import pytest
 from sympy import isprime
 
 from tno.mpc.encryption_schemes.utils._check_gmpy2 import USE_GMPY2
 from tno.mpc.encryption_schemes.utils.utils import (
     extended_euclidean,
+    is_prime,
     lcm,
     mod_inv,
     pow_mod,
     randprime,
 )
 
 if USE_GMPY2:
@@ -213,7 +214,30 @@
 
     :param value_1: integer value
     :param value_2: integer value
     """
     gcd_inputs, value_1_mult, value_2_mult = extended_euclidean(value_1, value_2)
     assert gcd_inputs == gcd(value_1, value_2)
     assert value_1_mult * value_1 + value_2_mult * value_2 == gcd_inputs
+
+
+@pytest.mark.parametrize(
+    "low, high",
+    # random intervals
+    [
+        (rand_low, rand_low + randint(0, 2 ** 100))
+        for rand_low in [randint(0, 2 ** 100) for _ in range(100)]
+    ],
+)
+def test_primality_check_primes(low: int, high: int) -> None:
+    prime = randprime(low, high)
+    assert is_prime(prime)
+
+
+@pytest.mark.parametrize(
+    "number",
+    # random number
+    list(randint(0, 2 ** 100) for _ in range(100)),
+)
+def test_primality_check_random_number(number: int) -> None:
+    # compare the custom is_prime function with the sympy.isprime function
+    assert isprime(number) == is_prime(number)
```

## Comparing `tno.mpc.encryption_schemes.utils-0.7.5-py3.8-nspkg.pth` & `tno.mpc.encryption_schemes.utils-0.8.0-py3.8-nspkg.pth`

 * *Files identical despite different names*

## Comparing `tno.mpc.encryption_schemes.utils-0.7.5.dist-info/LICENSE` & `tno.mpc.encryption_schemes.utils-0.8.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `tno.mpc.encryption_schemes.utils-0.7.5.dist-info/METADATA` & `tno.mpc.encryption_schemes.utils-0.8.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 Metadata-Version: 2.1
 Name: tno.mpc.encryption-schemes.utils
-Version: 0.7.5
+Version: 0.8.0
 Summary: Generic utilities for implementing encryption schemes
 Home-page: https://mpc.tno.nl/
 Author: TNO MPC Lab
 Author-email: mpclab@tno.nl
 Maintainer: TNO MPC Lab
 Maintainer-email: mpclab@tno.nl
 License: Apache License, Version 2.0
 Download-URL: https://pypi.org/project/tno.mpc.encryption_schemes.utils/#files
-Project-URL: Documentation, https://docs.mpc.tno.nl/encryption_schemes/utils/0.7.5
+Project-URL: Documentation, https://docs.mpc.tno.nl/encryption_schemes/utils/0.8.0
 Project-URL: Source Code, https://github.com/TNO-MPC/encryption_schemes.utils
 Keywords: TNO,MPC,multi-party computation,encryption schemes,utils
 Platform: any
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Programming Language :: Python :: 3
 Classifier: Operating System :: OS Independent
 Classifier: Intended Audience :: Developers
@@ -41,15 +41,15 @@
 The package tno.mpc.encryption_schemes.utils is part of the TNO Python Toolbox.
 
 *Limitations in (end-)use: the content of this software package may solely be used for applications that comply with international export control laws.*  
 *This implementation of cryptographic software has not been audited. Use at your own risk.*
 
 ## Documentation
 
-Documentation of the tno.mpc.encryption_schemes.utils package can be found [here](https://docs.mpc.tno.nl/encryption_schemes/utils/0.7.5).
+Documentation of the tno.mpc.encryption_schemes.utils package can be found [here](https://docs.mpc.tno.nl/encryption_schemes/utils/0.8.0).
 
 ## Install
 
 Easily install the tno.mpc.encryption_schemes.utils package using pip:
 ```console
 $ python -m pip install tno.mpc.encryption_schemes.utils
 ```
```

## Comparing `tno.mpc.encryption_schemes.utils-0.7.5.dist-info/RECORD` & `tno.mpc.encryption_schemes.utils-0.8.0.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,16 +1,16 @@
-tno.mpc.encryption_schemes.utils-0.7.5-py3.8-nspkg.pth,sha256=YRQnB3vHjloiH7uIsg6K91Y1ue-xy4IjZTTm68UEkOM,3459
-tno/mpc/encryption_schemes/utils/__init__.py,sha256=M64XL8iiCtb1OhxPs0kC6T6h6HQ4ldrRXEx_g8yoar0,1395
-tno/mpc/encryption_schemes/utils/_check_gmpy2.py,sha256=9xWEwM8G2x44byX0xZHDH14t-MAuG1OxJ5dnlWWqOgM,1860
+tno.mpc.encryption_schemes.utils-0.8.0-py3.8-nspkg.pth,sha256=YRQnB3vHjloiH7uIsg6K91Y1ue-xy4IjZTTm68UEkOM,3459
+tno/mpc/encryption_schemes/utils/__init__.py,sha256=rgcnqzveBYwy8Kfl0ZOorfvcv6Xx04D2ZwuQF3Mgrw0,1435
+tno/mpc/encryption_schemes/utils/_check_gmpy2.py,sha256=Op9sGaLBLVCWdNhde4LsYPvtui_6KnJaj7y0r7McMpY,1985
 tno/mpc/encryption_schemes/utils/fixed_point.py,sha256=KaqlmS21B27YEvD4eQEAnPbz0GOnCbQWfrTFXQvw67c,29377
 tno/mpc/encryption_schemes/utils/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-tno/mpc/encryption_schemes/utils/utils.py,sha256=0nM6GMDenWbzhkAvhu-6Zhx56xWA2M2AxC5D69sf0ds,2973
+tno/mpc/encryption_schemes/utils/utils.py,sha256=ms5b9zt6t1gFEc12sT9NoZaiAR_FgGxf8oNyVjmSnr4,3292
 tno/mpc/encryption_schemes/utils/test/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 tno/mpc/encryption_schemes/utils/test/fixed_point_test_parameters.py,sha256=wpzp4Cides7XMCFQtPW1oFaPthPeXTJZUBy4JQ_hv9k,11103
 tno/mpc/encryption_schemes/utils/test/test_fixed_point.py,sha256=gxACyjKZXYiNntGAu4lCAL0HbXZ_iag1-XD2hIiLy1U,15929
-tno/mpc/encryption_schemes/utils/test/test_utils.py,sha256=WlaXv93aeA8oSFOpLseC7LVFk5_U-_UPminNpz9Nyzo,7277
-tno.mpc.encryption_schemes.utils-0.7.5.dist-info/LICENSE,sha256=z5Wve6x_v4PZT6ZnqeIaTbrsHk70BBV_lLaVRAtPU0Q,11396
-tno.mpc.encryption_schemes.utils-0.7.5.dist-info/METADATA,sha256=_UGdcucK2kfyAp3y-VMUP2gWkYPogad0hQEni4_oAFY,2904
-tno.mpc.encryption_schemes.utils-0.7.5.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-tno.mpc.encryption_schemes.utils-0.7.5.dist-info/namespace_packages.txt,sha256=vvw6jWhI_bvZODUrUmfZIx-LX4pDD9tlMmw6kZAVd7Y,39
-tno.mpc.encryption_schemes.utils-0.7.5.dist-info/top_level.txt,sha256=7cHKx5j6ibiq14EYKPAhHk_NqB8u-nPUjh5R4TDqpHo,4
-tno.mpc.encryption_schemes.utils-0.7.5.dist-info/RECORD,,
+tno/mpc/encryption_schemes/utils/test/test_utils.py,sha256=5GnNxZohS6vQJbyUOsk7sjK34raEhW9p6_bFdIYFNSA,7914
+tno.mpc.encryption_schemes.utils-0.8.0.dist-info/LICENSE,sha256=z5Wve6x_v4PZT6ZnqeIaTbrsHk70BBV_lLaVRAtPU0Q,11396
+tno.mpc.encryption_schemes.utils-0.8.0.dist-info/METADATA,sha256=SW9Jx4mYQbHkpSf0XXIOHNY48QtB7fS-nZEn5nd4GtM,2904
+tno.mpc.encryption_schemes.utils-0.8.0.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
+tno.mpc.encryption_schemes.utils-0.8.0.dist-info/namespace_packages.txt,sha256=vvw6jWhI_bvZODUrUmfZIx-LX4pDD9tlMmw6kZAVd7Y,39
+tno.mpc.encryption_schemes.utils-0.8.0.dist-info/top_level.txt,sha256=7cHKx5j6ibiq14EYKPAhHk_NqB8u-nPUjh5R4TDqpHo,4
+tno.mpc.encryption_schemes.utils-0.8.0.dist-info/RECORD,,
```

