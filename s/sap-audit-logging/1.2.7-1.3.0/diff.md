# Comparing `tmp/sap_audit_logging-1.2.7-py3-none-any.whl.zip` & `tmp/sap_audit_logging-1.3.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,21 +1,21 @@
-Zip file size: 19116 bytes, number of entries: 19
--rw-r--r--  2.0 unx       87 b- defN 23-Apr-19 13:18 sap/__init__.py
--rw-r--r--  2.0 unx       80 b- defN 23-Apr-19 13:18 sap/audit_logging/__init__.py
--rw-r--r--  2.0 unx     2410 b- defN 23-Apr-19 13:18 sap/audit_logging/audit_logger.py
--rw-r--r--  2.0 unx     2021 b- defN 23-Apr-19 13:18 sap/audit_logging/loggers.py
--rw-r--r--  2.0 unx     4533 b- defN 23-Apr-19 13:18 sap/audit_logging/plans.py
--rw-r--r--  2.0 unx     1342 b- defN 23-Apr-19 13:18 sap/audit_logging/util.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 13:18 sap/audit_logging/messages/__init__.py
--rw-r--r--  2.0 unx     1944 b- defN 23-Apr-19 13:18 sap/audit_logging/messages/audit_message.py
--rw-r--r--  2.0 unx      465 b- defN 23-Apr-19 13:18 sap/audit_logging/messages/configuration_change_message.py
--rw-r--r--  2.0 unx     2520 b- defN 23-Apr-19 13:18 sap/audit_logging/messages/data_access_message.py
--rw-r--r--  2.0 unx      869 b- defN 23-Apr-19 13:18 sap/audit_logging/messages/data_modification_message.py
--rw-r--r--  2.0 unx     1116 b- defN 23-Apr-19 13:18 sap/audit_logging/messages/security_event_message.py
--rw-r--r--  2.0 unx     2230 b- defN 23-Apr-19 13:18 sap/audit_logging/messages/transactional_message.py
--rw-r--r--  2.0 unx        6 b- defN 23-Apr-19 13:20 sap_audit_logging-1.2.7.data/data/version.txt
--rw-r--r--  2.0 unx    12569 b- defN 23-Apr-19 13:22 sap_audit_logging-1.2.7.dist-info/LICENSE
--rw-r--r--  2.0 unx    12760 b- defN 23-Apr-19 13:22 sap_audit_logging-1.2.7.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-19 13:22 sap_audit_logging-1.2.7.dist-info/WHEEL
--rw-r--r--  2.0 unx        4 b- defN 23-Apr-19 13:22 sap_audit_logging-1.2.7.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1770 b- defN 23-Apr-19 13:22 sap_audit_logging-1.2.7.dist-info/RECORD
-19 files, 46818 bytes uncompressed, 16138 bytes compressed:  65.5%
+Zip file size: 19326 bytes, number of entries: 19
+-rw-r--r--  2.0 unx       87 b- defN 23-Jun-05 13:19 sap/__init__.py
+-rw-r--r--  2.0 unx       80 b- defN 23-Jun-05 13:19 sap/audit_logging/__init__.py
+-rw-r--r--  2.0 unx     2410 b- defN 23-Jun-05 13:19 sap/audit_logging/audit_logger.py
+-rw-r--r--  2.0 unx     2442 b- defN 23-Jun-05 13:19 sap/audit_logging/loggers.py
+-rw-r--r--  2.0 unx     4533 b- defN 23-Jun-05 13:19 sap/audit_logging/plans.py
+-rw-r--r--  2.0 unx     1342 b- defN 23-Jun-05 13:19 sap/audit_logging/util.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-05 13:19 sap/audit_logging/messages/__init__.py
+-rw-r--r--  2.0 unx     1944 b- defN 23-Jun-05 13:19 sap/audit_logging/messages/audit_message.py
+-rw-r--r--  2.0 unx      465 b- defN 23-Jun-05 13:19 sap/audit_logging/messages/configuration_change_message.py
+-rw-r--r--  2.0 unx     2520 b- defN 23-Jun-05 13:19 sap/audit_logging/messages/data_access_message.py
+-rw-r--r--  2.0 unx      869 b- defN 23-Jun-05 13:19 sap/audit_logging/messages/data_modification_message.py
+-rw-r--r--  2.0 unx     1116 b- defN 23-Jun-05 13:19 sap/audit_logging/messages/security_event_message.py
+-rw-r--r--  2.0 unx     2230 b- defN 23-Jun-05 13:19 sap/audit_logging/messages/transactional_message.py
+-rw-r--r--  2.0 unx        6 b- defN 23-Jun-05 13:22 sap_audit_logging-1.3.0.data/data/version.txt
+-rw-r--r--  2.0 unx    12569 b- defN 23-Jun-05 13:23 sap_audit_logging-1.3.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx    13074 b- defN 23-Jun-05 13:23 sap_audit_logging-1.3.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-05 13:23 sap_audit_logging-1.3.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        4 b- defN 23-Jun-05 13:23 sap_audit_logging-1.3.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1770 b- defN 23-Jun-05 13:23 sap_audit_logging-1.3.0.dist-info/RECORD
+19 files, 47553 bytes uncompressed, 16348 bytes compressed:  65.6%
```

## zipnote {}

```diff
@@ -33,26 +33,26 @@
 
 Filename: sap/audit_logging/messages/security_event_message.py
 Comment: 
 
 Filename: sap/audit_logging/messages/transactional_message.py
 Comment: 
 
-Filename: sap_audit_logging-1.2.7.data/data/version.txt
+Filename: sap_audit_logging-1.3.0.data/data/version.txt
 Comment: 
 
-Filename: sap_audit_logging-1.2.7.dist-info/LICENSE
+Filename: sap_audit_logging-1.3.0.dist-info/LICENSE
 Comment: 
 
-Filename: sap_audit_logging-1.2.7.dist-info/METADATA
+Filename: sap_audit_logging-1.3.0.dist-info/METADATA
 Comment: 
 
-Filename: sap_audit_logging-1.2.7.dist-info/WHEEL
+Filename: sap_audit_logging-1.3.0.dist-info/WHEEL
 Comment: 
 
-Filename: sap_audit_logging-1.2.7.dist-info/top_level.txt
+Filename: sap_audit_logging-1.3.0.dist-info/top_level.txt
 Comment: 
 
-Filename: sap_audit_logging-1.2.7.dist-info/RECORD
+Filename: sap_audit_logging-1.3.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## sap/audit_logging/loggers.py

```diff
@@ -3,52 +3,61 @@
 from os import getenv
 import requests
 from requests.adapters import HTTPAdapter
 from urllib3.util import Retry
 
 AUDIT_LOG_CLIENT_LOGGER = 'py-audit-logger-client'
 RETRY_COUNT = int(getenv('AUDITLOG_CONNECTION_RETRY_COUNT', '5'))
+BACKOFF_FACTOR = float(getenv('AUDITLOG_CONNECTION_BACKOFF_FACTOR', '1'))
+TIMEOUT = getenv('AUDITLOG_CONNECTION_TIMEOUT', None)
 
 class ConsoleLogger: # pylint: disable=too-few-public-methods
     ''' ConsoleLogger '''
     @staticmethod
     def log(message, endpoint):
         ''' Print to standart out '''
         print('{0}: {1}'.format(endpoint, message)) # pylint: disable=superfluous-parens
 
 class HttpLogger: # pylint: disable=too-few-public-methods
     ''' HttpLogger '''
 
     def __init__(self, plan):
         self._plan = plan
+        self._request_back_off_factor = BACKOFF_FACTOR
+        self._request_retry_count = RETRY_COUNT
+        self._request_timeout = TIMEOUT
 
         logging.basicConfig()
         self._logger = logging.getLogger(__name__)
 
     def log(self, message, endpoint):
         ''' Send message to service '''
         url = self._plan.url() + endpoint
         self._logger.debug('>>> URL: %s, message:%s', url, message)
-        session = _get_retriable_session()
+        session = self._get_retriable_session()
         req_options = self._plan.auth()
         _add_request_content_type(req_options)
         response = session.post(
-            url, json=message, **req_options)
+            url, json=message, timeout=self._request_timeout, **req_options)
         session.close()
 
         _check_status_code(response, url)
 
-def _get_retriable_session():
-    session = requests.Session()
-    retry = Retry(total=RETRY_COUNT, backoff_factor=1,
-                  status_forcelist=[404, 502, 503, 504], allowed_methods=['POST'])
-    adapter = HTTPAdapter(max_retries=retry)
-    session.mount('http://', adapter)
-    session.mount('https://', adapter)
-    return session
+    def _get_retriable_session(self):
+        session = requests.Session()
+        retry = Retry(
+            total=self._request_retry_count,
+            backoff_factor=self._request_back_off_factor,
+            status_forcelist=[404, 502, 503, 504],
+            allowed_methods=['POST']
+        )
+        adapter = HTTPAdapter(max_retries=retry)
+        session.mount('http://', adapter)
+        session.mount('https://', adapter)
+        return session
 
 
 def _add_request_content_type(req_options):
     if "headers" not in req_options:
         req_options['headers'] = {}
     req_options['headers']['Content-Type'] = 'application/json'
```

## Comparing `sap_audit_logging-1.2.7.dist-info/LICENSE` & `sap_audit_logging-1.3.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `sap_audit_logging-1.2.7.dist-info/METADATA` & `sap_audit_logging-1.3.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,40 +1,39 @@
 Metadata-Version: 2.1
 Name: sap-audit-logging
-Version: 1.2.7
+Version: 1.3.0
 Summary: SAP Python audit log service client
 Home-page: https://www.sap.com/
 Author: SAP SE
 License: SAP DEVELOPER LICENSE AGREEMENT
 Keywords: SAP audit auditlog
-Platform: UNKNOWN
-Classifier: Programming Language :: Python :: 3.4
-Classifier: Programming Language :: Python :: 3.5
-Classifier: Programming Language :: Python :: 3.6
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: Operating System :: Microsoft
 Classifier: Operating System :: Other OS
 Classifier: Topic :: Software Development
 Classifier: Topic :: Software Development :: Libraries :: Python Modules
-Requires-Python: >=3.0
+Requires-Python: >=3.7
 Description-Content-Type: text/markdown
-Requires-Dist: requests (<3.0,>=2.26.0)
+License-File: LICENSE
+Requires-Dist: requests (<3.0,>=2.31.0)
 Requires-Dist: cfenv (<1.0,>=0.5.3)
 
 sap\_audit\_logging
 ===================
 
 Provides audit logging functionalities for Python applications.
 
+**Note**: From v1.3.0 of the library, it requires Python >=3.7.
+
 Overview
 --------
 
 Audit logging is about writing entries in a specific format to a log
 storage. Subject to audit logging are events of significant importance.
 For example, security events which may impact the confidentiality, the
 integrity or the availability of a system. Another example of such an
@@ -133,14 +132,19 @@
     audit_logger = AuditLogger('<service_instance_name>').with_security_context(security_context)
 
 **Note**: When a message is logged, the library checks for missing mandatory properties, and will throw an error if some of them are
 not provided.
 
 **Note**: In case a request to audit log service fails, the library will retry sending it.
 By default the number of attempts is 5, can be configured via the *AUDITLOG_CONNECTION_RETRY_COUNT* environment variable.
+The default backoff factor (time between retry attempts after the second try) is `1` second. It can be configured via 
+the *AUDITLOG_CONNECTION_BACKOFF_FACTOR* environment variable.
+
+**Note**: The request timeout can be configured to avoid long lasting requests.
+By default there is no timeout, it can be configured via the *AUDITLOG_CONNECTION_TIMEOUT* environment variable (timeout in seconds).
 
 Data access messages
 ~~~~~~~~~~~~~~~~~~~~
 
 If you need to create an entry for a data access operation
 over personal data, you can achieve that with the following code:
 
@@ -300,9 +304,7 @@
    service that do not support setting a tenant.
 -  ``set_data(data)`` - takes a string representing the security event
    description. This is **mandatory**.
 -  ``set_ip(source_ip)`` - states the IP of the machine that contacts
    the system. It is not mandatory, but it should be either IPv4 or
    IPv6.
 -  ``log()`` - sends the message to the audit log service.
-
-
```

## Comparing `sap_audit_logging-1.2.7.dist-info/RECORD` & `sap_audit_logging-1.3.0.dist-info/RECORD`

 * *Files 16% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 sap/__init__.py,sha256=5AVkXWSDh0tz_WinQftfqZ78Tj15zjU5Q2g9oHCf6gc,87
 sap/audit_logging/__init__.py,sha256=zgajclTOj8v0LhOdhyJzndXhT-Jox61uERfv__iZWvU,80
 sap/audit_logging/audit_logger.py,sha256=Y7-cpbaph185BEg-bKVx1LKsQmUUiq4tFXhRrLdPgIQ,2410
-sap/audit_logging/loggers.py,sha256=Wpl30l_IJID1WP-6rwdZR-xigJOTAYFXQiprRe343-s,2021
+sap/audit_logging/loggers.py,sha256=cs1kD_XuJR8rpOWfr-Dz_u_ASsywnotU98BK1SFV6OQ,2442
 sap/audit_logging/plans.py,sha256=1e6ddqloM_sNzSjm5XLBPk9SaNvcndRoUQP3h6ug_qU,4533
 sap/audit_logging/util.py,sha256=l-bHkvA7wfXckNttYvssK5EkxpKTCEz2brvJj15Eyfk,1342
 sap/audit_logging/messages/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 sap/audit_logging/messages/audit_message.py,sha256=TlKltjrRDwnKSQpvIRYk0LEW8jQIebBONhmiTSy0-M0,1944
 sap/audit_logging/messages/configuration_change_message.py,sha256=75sLeFHSzdv_VVS5_dW89_h-MAKUFY6Mi7e1wlj5SVU,465
 sap/audit_logging/messages/data_access_message.py,sha256=1rG-uEh4fWoyN_UvJRfdqtElUpBNYUjTz7i3b52xUYw,2520
 sap/audit_logging/messages/data_modification_message.py,sha256=xmEpKLb2xECVSLA4auyNOr7zIoQZWTAh_96vsKEwzAY,869
 sap/audit_logging/messages/security_event_message.py,sha256=RDyQYA9KDcDVp-BOf36gb0lmqVMRptdRvIduiSuiK14,1116
 sap/audit_logging/messages/transactional_message.py,sha256=b07D_evewLDrcirMjV4b04yklX4r2KrVYjU8XsN-tOk,2230
-sap_audit_logging-1.2.7.data/data/version.txt,sha256=2ejoQpxqfQuWXk-sJqXv_3ED8FX6qYzOtb1HMf0kYDo,6
-sap_audit_logging-1.2.7.dist-info/LICENSE,sha256=DYP9C1BSy7cci4r8ihdmeTl1R7DMKUZgDAoeO9QrbS8,12569
-sap_audit_logging-1.2.7.dist-info/METADATA,sha256=bvvwIH1HdZIMeCaX_lCIntdRcQGiqFOio_IQIlfTc3o,12760
-sap_audit_logging-1.2.7.dist-info/WHEEL,sha256=p46_5Uhzqz6AzeSosiOnxK-zmFja1i22CrQCjmYe8ec,92
-sap_audit_logging-1.2.7.dist-info/top_level.txt,sha256=MnaK1kw5Vp7_F6iiT_kvTlnbZZnDg2-DZzyEjv3kzn4,4
-sap_audit_logging-1.2.7.dist-info/RECORD,,
+sap_audit_logging-1.3.0.data/data/version.txt,sha256=ZNI_hY71Gw-Zbklm1OJ8A3G0N-LSeHiQsfetItTsVmM,6
+sap_audit_logging-1.3.0.dist-info/LICENSE,sha256=DYP9C1BSy7cci4r8ihdmeTl1R7DMKUZgDAoeO9QrbS8,12569
+sap_audit_logging-1.3.0.dist-info/METADATA,sha256=jbddr2ZKbem4C6aa9uDEXKR1PMRNJTYlmkuGUCY7-2g,13074
+sap_audit_logging-1.3.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+sap_audit_logging-1.3.0.dist-info/top_level.txt,sha256=MnaK1kw5Vp7_F6iiT_kvTlnbZZnDg2-DZzyEjv3kzn4,4
+sap_audit_logging-1.3.0.dist-info/RECORD,,
```

